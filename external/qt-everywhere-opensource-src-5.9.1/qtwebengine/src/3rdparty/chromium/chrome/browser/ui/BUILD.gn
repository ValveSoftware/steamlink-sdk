# Copyright 2014 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/config/chromecast_build.gni")
import("//build/config/crypto.gni")
import("//build/config/features.gni")
import("//build/config/ui.gni")
import("//build/split_static_library.gni")
import("//chrome/common/features.gni")
import("//extensions/features/features.gni")
import("//media/media_options.gni")
import("//printing/features/features.gni")

config("ui_warnings") {
  if (is_clang) {
    # TODO(thakis): Remove this once http://crbug.com/383820 is figured out
    cflags = [ "-Wno-nonnull" ]
  }
}

# Use a static library here because many test binaries depend on this but don't
# require many files from it. This makes linking more efficient.
split_static_library("ui") {
  # Split into multiple static libraries on Windows official builds, where we
  # run into a 2GB max size limit.
  if (is_win && is_official_build) {
    split_count = 5
  } else {
    split_count = 1
  }

  sources = [
    "accelerator_utils.h",
    "android/android_about_app_info.cc",
    "android/android_about_app_info.h",
    "android/external_protocol_dialog_android.cc",
    "android/status_tray_android.cc",
    "app_list/app_list_util.cc",
    "app_list/app_list_util.h",

    # All other browser/ui/app_list files go under enable_app_list below.
    "autofill/autofill_dialog_models.cc",
    "autofill/autofill_dialog_models.h",
    "autofill/autofill_popup_controller.h",
    "autofill/autofill_popup_controller_impl.cc",
    "autofill/autofill_popup_controller_impl.h",
    "autofill/autofill_popup_layout_model.cc",
    "autofill/autofill_popup_layout_model.h",
    "autofill/autofill_popup_view.h",
    "autofill/autofill_popup_view_delegate.h",
    "autofill/chrome_autofill_client.cc",
    "autofill/chrome_autofill_client.h",
    "autofill/country_combobox_model.cc",
    "autofill/country_combobox_model.h",
    "autofill/create_card_unmask_prompt_view.h",
    "autofill/credit_card_scanner_controller.cc",
    "autofill/credit_card_scanner_controller.h",
    "autofill/credit_card_scanner_view.cc",
    "autofill/credit_card_scanner_view.h",
    "autofill/credit_card_scanner_view_delegate.h",
    "autofill/password_generation_popup_controller.h",
    "autofill/password_generation_popup_controller_impl.cc",
    "autofill/password_generation_popup_controller_impl.h",
    "autofill/password_generation_popup_observer.h",
    "autofill/password_generation_popup_view.cc",
    "autofill/password_generation_popup_view.h",
    "autofill/popup_controller_common.cc",
    "autofill/popup_controller_common.h",
    "autofill/popup_view_common.cc",
    "autofill/popup_view_common.h",
    "blocked_content/blocked_window_params.cc",
    "blocked_content/blocked_window_params.h",
    "blocked_content/popup_blocker_tab_helper.cc",
    "blocked_content/popup_blocker_tab_helper.h",
    "bookmarks/bookmark_bar.h",
    "bookmarks/bookmark_bar_constants.h",
    "bookmarks/bookmark_bar_instructions_delegate.h",
    "bookmarks/bookmark_bubble_observer.h",
    "bookmarks/bookmark_editor.cc",
    "bookmarks/bookmark_editor.h",
    "bookmarks/bookmark_utils.cc",
    "bookmarks/bookmark_utils.h",
    "bookmarks/recently_used_folders_combo_model.cc",
    "bookmarks/recently_used_folders_combo_model.h",
    "browser_commands_chromeos.cc",
    "browser_commands_chromeos.h",
    "browser_commands_mac.cc",
    "browser_commands_mac.h",
    "browser_dialogs.h",
    "browser_mac.cc",
    "browser_mac.h",
    "browser_navigator_params.cc",
    "browser_navigator_params.h",
    "browser_ui_prefs.cc",
    "browser_ui_prefs.h",
    "chrome_select_file_policy.cc",
    "chrome_select_file_policy.h",
    "confirm_bubble.h",
    "crypto_module_password_dialog.h",
    "find_bar/find_bar.h",
    "find_bar/find_bar_state.h",
    "find_bar/find_bar_state_factory.cc",
    "find_bar/find_bar_state_factory.h",
    "find_bar/find_notification_details.h",
    "find_bar/find_tab_helper.cc",
    "find_bar/find_tab_helper.h",
    "javascript_dialogs/chrome_javascript_native_dialog_factory.h",
    "login/login_handler.cc",
    "login/login_handler.h",
    "login/login_interstitial_delegate.cc",
    "login/login_interstitial_delegate.h",
    "media_utils.cc",
    "media_utils.h",
    "navigation_correction_tab_observer.cc",
    "navigation_correction_tab_observer.h",
    "passwords/account_avatar_fetcher.cc",
    "passwords/account_avatar_fetcher.h",
    "passwords/manage_passwords_state.cc",
    "passwords/manage_passwords_state.h",
    "passwords/manage_passwords_view_utils.cc",
    "passwords/manage_passwords_view_utils.h",
    "passwords/password_manager_presenter.cc",
    "passwords/password_manager_presenter.h",
    "passwords/password_ui_view.h",
    "platform_keys_certificate_selector_chromeos.h",
    "prefs/prefs_tab_helper.cc",
    "prefs/prefs_tab_helper.h",
    "process_singleton_dialog_linux.h",
    "profile_chooser_constants.h",
    "profile_error_dialog.cc",
    "profile_error_dialog.h",
    "protocol_dialog_delegate.h",
    "proximity_auth/proximity_auth_error_bubble.h",
    "screen_capture_notification_ui.h",
    "search/instant_search_prerenderer.cc",
    "search/instant_search_prerenderer.h",
    "search/instant_tab.cc",
    "search/instant_tab.h",
    "search/new_tab_page_interceptor_service.cc",
    "search/new_tab_page_interceptor_service.h",
    "search/new_tab_page_interceptor_service_factory.cc",
    "search/new_tab_page_interceptor_service_factory.h",
    "search/search_ipc_router.cc",
    "search/search_ipc_router.h",
    "search/search_ipc_router_policy_impl.cc",
    "search/search_ipc_router_policy_impl.h",
    "search/search_model.cc",
    "search/search_model.h",
    "search/search_model_observer.h",
    "search/search_tab_helper.cc",
    "search/search_tab_helper.h",
    "search/search_tab_helper_delegate.cc",
    "search/search_tab_helper_delegate.h",
    "search_engines/edit_search_engine_controller.cc",
    "search_engines/edit_search_engine_controller.h",
    "search_engines/keyword_editor_controller.cc",
    "search_engines/keyword_editor_controller.h",
    "search_engines/search_engine_tab_helper.cc",
    "search_engines/search_engine_tab_helper.h",
    "search_engines/template_url_table_model.cc",
    "search_engines/template_url_table_model.h",
    "session_crashed_bubble.h",
    "simple_message_box.h",
    "simple_message_box_internal.cc",
    "simple_message_box_internal.h",
    "status_bubble.h",
    "sync/bubble_sync_promo_delegate.h",
    "sync/profile_signin_confirmation_helper.cc",
    "sync/profile_signin_confirmation_helper.h",
    "sync/tab_contents_synced_tab_delegate.cc",
    "sync/tab_contents_synced_tab_delegate.h",
    "tab_contents/chrome_web_contents_view_delegate.h",
    "tab_contents/core_tab_helper.cc",
    "tab_contents/core_tab_helper.h",
    "tab_contents/core_tab_helper_delegate.cc",
    "tab_contents/core_tab_helper_delegate.h",
    "tab_dialogs.cc",
    "tab_dialogs.h",
    "tab_helpers.cc",
    "tab_helpers.h",
    "tab_modal_confirm_dialog.h",
    "toolbar/chrome_toolbar_model_delegate.cc",
    "toolbar/chrome_toolbar_model_delegate.h",
    "translate/language_combobox_model.cc",
    "translate/language_combobox_model.h",
    "translate/translate_bubble_model.h",
    "translate/translate_bubble_model_impl.cc",
    "translate/translate_bubble_model_impl.h",
    "translate/translate_bubble_view_state_transition.cc",
    "translate/translate_bubble_view_state_transition.h",
    "uninstall_browser_prompt.h",
    "validation_message_bubble.h",
    "view_ids.h",
    "views/platform_keys_certificate_selector_chromeos.cc",
    "views/platform_keys_certificate_selector_chromeos.h",
    "web_contents_sizer.h",
    "website_settings/permission_prompt.h",
    "website_settings/website_settings.cc",
    "website_settings/website_settings.h",
    "website_settings/website_settings_ui.cc",
    "website_settings/website_settings_ui.h",
    "webui/about_ui.cc",
    "webui/about_ui.h",
    "webui/bluetooth_internals/bluetooth_internals_ui.cc",
    "webui/bluetooth_internals/bluetooth_internals_ui.h",
    "webui/browsing_history_handler.cc",
    "webui/browsing_history_handler.h",
    "webui/chrome_web_ui_controller_factory.cc",
    "webui/chrome_web_ui_controller_factory.h",
    "webui/chromeos/bluetooth_pairing_ui.cc",
    "webui/chromeos/bluetooth_pairing_ui.h",
    "webui/chromeos/certificate_manager_dialog_ui.cc",
    "webui/chromeos/certificate_manager_dialog_ui.h",
    "webui/chromeos/choose_mobile_network_ui.cc",
    "webui/chromeos/choose_mobile_network_ui.h",
    "webui/chromeos/cryptohome_ui.cc",
    "webui/chromeos/cryptohome_ui.h",
    "webui/chromeos/cryptohome_web_ui_handler.cc",
    "webui/chromeos/cryptohome_web_ui_handler.h",
    "webui/chromeos/drive_internals_ui.cc",
    "webui/chromeos/drive_internals_ui.h",
    "webui/chromeos/first_run/first_run_actor.cc",
    "webui/chromeos/first_run/first_run_actor.h",
    "webui/chromeos/first_run/first_run_handler.cc",
    "webui/chromeos/first_run/first_run_handler.h",
    "webui/chromeos/first_run/first_run_ui.cc",
    "webui/chromeos/first_run/first_run_ui.h",
    "webui/chromeos/image_source.cc",
    "webui/chromeos/image_source.h",
    "webui/chromeos/keyboard_overlay_ui.cc",
    "webui/chromeos/keyboard_overlay_ui.h",
    "webui/chromeos/login/app_launch_splash_screen_handler.cc",
    "webui/chromeos/login/app_launch_splash_screen_handler.h",
    "webui/chromeos/login/arc_terms_of_service_screen_handler.cc",
    "webui/chromeos/login/arc_terms_of_service_screen_handler.h",
    "webui/chromeos/login/authenticated_user_email_retriever.cc",
    "webui/chromeos/login/authenticated_user_email_retriever.h",
    "webui/chromeos/login/auto_enrollment_check_screen_handler.cc",
    "webui/chromeos/login/auto_enrollment_check_screen_handler.h",
    "webui/chromeos/login/base_screen_handler.cc",
    "webui/chromeos/login/base_screen_handler.h",
    "webui/chromeos/login/controller_pairing_screen_handler.cc",
    "webui/chromeos/login/controller_pairing_screen_handler.h",
    "webui/chromeos/login/core_oobe_handler.cc",
    "webui/chromeos/login/core_oobe_handler.h",
    "webui/chromeos/login/demo_mode_detector.cc",
    "webui/chromeos/login/demo_mode_detector.h",
    "webui/chromeos/login/device_disabled_screen_handler.cc",
    "webui/chromeos/login/device_disabled_screen_handler.h",
    "webui/chromeos/login/enable_debugging_screen_handler.cc",
    "webui/chromeos/login/enable_debugging_screen_handler.h",
    "webui/chromeos/login/enrollment_screen_handler.cc",
    "webui/chromeos/login/enrollment_screen_handler.h",
    "webui/chromeos/login/error_screen_handler.cc",
    "webui/chromeos/login/error_screen_handler.h",
    "webui/chromeos/login/eula_screen_handler.cc",
    "webui/chromeos/login/eula_screen_handler.h",
    "webui/chromeos/login/gaia_screen_handler.cc",
    "webui/chromeos/login/gaia_screen_handler.h",
    "webui/chromeos/login/hid_detection_screen_handler.cc",
    "webui/chromeos/login/hid_detection_screen_handler.h",
    "webui/chromeos/login/host_pairing_screen_handler.cc",
    "webui/chromeos/login/host_pairing_screen_handler.h",
    "webui/chromeos/login/kiosk_app_menu_handler.cc",
    "webui/chromeos/login/kiosk_app_menu_handler.h",
    "webui/chromeos/login/kiosk_autolaunch_screen_handler.cc",
    "webui/chromeos/login/kiosk_autolaunch_screen_handler.h",
    "webui/chromeos/login/kiosk_enable_screen_handler.cc",
    "webui/chromeos/login/kiosk_enable_screen_handler.h",
    "webui/chromeos/login/l10n_util.cc",
    "webui/chromeos/login/l10n_util.h",
    "webui/chromeos/login/network_dropdown.cc",
    "webui/chromeos/login/network_dropdown.h",
    "webui/chromeos/login/network_dropdown_handler.cc",
    "webui/chromeos/login/network_dropdown_handler.h",
    "webui/chromeos/login/network_screen_handler.cc",
    "webui/chromeos/login/network_screen_handler.h",
    "webui/chromeos/login/network_state_informer.cc",
    "webui/chromeos/login/network_state_informer.h",
    "webui/chromeos/login/oobe_screen.cc",
    "webui/chromeos/login/oobe_screen.h",
    "webui/chromeos/login/oobe_ui.cc",
    "webui/chromeos/login/oobe_ui.h",
    "webui/chromeos/login/reset_screen_handler.cc",
    "webui/chromeos/login/reset_screen_handler.h",
    "webui/chromeos/login/screenlock_icon_provider.cc",
    "webui/chromeos/login/screenlock_icon_provider.h",
    "webui/chromeos/login/screenlock_icon_source.cc",
    "webui/chromeos/login/screenlock_icon_source.h",
    "webui/chromeos/login/signin_screen_handler.cc",
    "webui/chromeos/login/signin_screen_handler.h",
    "webui/chromeos/login/supervised_user_creation_screen_handler.cc",
    "webui/chromeos/login/supervised_user_creation_screen_handler.h",
    "webui/chromeos/login/terms_of_service_screen_handler.cc",
    "webui/chromeos/login/terms_of_service_screen_handler.h",
    "webui/chromeos/login/update_screen_handler.cc",
    "webui/chromeos/login/update_screen_handler.h",
    "webui/chromeos/login/user_board_screen_handler.cc",
    "webui/chromeos/login/user_board_screen_handler.h",
    "webui/chromeos/login/user_image_screen_handler.cc",
    "webui/chromeos/login/user_image_screen_handler.h",
    "webui/chromeos/login/wrong_hwid_screen_handler.cc",
    "webui/chromeos/login/wrong_hwid_screen_handler.h",
    "webui/chromeos/mobile_setup_dialog.cc",
    "webui/chromeos/mobile_setup_dialog.h",
    "webui/chromeos/mobile_setup_ui.cc",
    "webui/chromeos/mobile_setup_ui.h",
    "webui/chromeos/network_ui.cc",
    "webui/chromeos/network_ui.h",
    "webui/chromeos/power_ui.cc",
    "webui/chromeos/power_ui.h",
    "webui/chromeos/proxy_settings_ui.cc",
    "webui/chromeos/proxy_settings_ui.h",
    "webui/chromeos/set_time_ui.cc",
    "webui/chromeos/set_time_ui.h",
    "webui/chromeos/sim_unlock_ui.cc",
    "webui/chromeos/sim_unlock_ui.h",
    "webui/chromeos/slow_trace_ui.cc",
    "webui/chromeos/slow_trace_ui.h",
    "webui/chromeos/slow_ui.cc",
    "webui/chromeos/slow_ui.h",
    "webui/chromeos/touch_view_controller_delegate.cc",
    "webui/chromeos/touch_view_controller_delegate.h",
    "webui/chromeos/ui_account_tweaks.cc",
    "webui/chromeos/ui_account_tweaks.h",
    "webui/components_ui.cc",
    "webui/components_ui.h",
    "webui/constrained_web_dialog_ui.cc",
    "webui/constrained_web_dialog_ui.h",
    "webui/cookies_tree_model_util.cc",
    "webui/cookies_tree_model_util.h",
    "webui/crashes_ui.cc",
    "webui/crashes_ui.h",
    "webui/device_log_ui.cc",
    "webui/device_log_ui.h",
    "webui/domain_reliability_internals_ui.cc",
    "webui/domain_reliability_internals_ui.h",
    "webui/engagement/site_engagement_ui.cc",
    "webui/engagement/site_engagement_ui.h",
    "webui/fallback_icon_source.cc",
    "webui/fallback_icon_source.h",
    "webui/favicon_source.cc",
    "webui/favicon_source.h",
    "webui/fileicon_source.cc",
    "webui/fileicon_source.h",
    "webui/flags_ui.cc",
    "webui/flags_ui.h",
    "webui/gcm_internals_ui.cc",
    "webui/gcm_internals_ui.h",
    "webui/history_ui.cc",
    "webui/history_ui.h",
    "webui/instant_ui.cc",
    "webui/instant_ui.h",
    "webui/interstitials/interstitial_ui.cc",
    "webui/interstitials/interstitial_ui.h",
    "webui/invalidations_message_handler.cc",
    "webui/invalidations_message_handler.h",
    "webui/invalidations_ui.cc",
    "webui/invalidations_ui.h",
    "webui/large_icon_source.cc",
    "webui/large_icon_source.h",
    "webui/local_state/local_state_ui.cc",
    "webui/local_state/local_state_ui.h",
    "webui/log_web_ui_url.cc",
    "webui/log_web_ui_url.h",
    "webui/metrics_handler.cc",
    "webui/metrics_handler.h",
    "webui/mojo_web_ui_controller.cc",
    "webui/mojo_web_ui_controller.h",
    "webui/mojo_web_ui_handler.h",
    "webui/net_export_ui.cc",
    "webui/net_export_ui.h",
    "webui/net_internals/net_internals_ui.cc",
    "webui/net_internals/net_internals_ui.h",
    "webui/ntp/ntp_user_data_logger.cc",
    "webui/ntp/ntp_user_data_logger.h",
    "webui/omnibox/omnibox_page_handler.cc",
    "webui/omnibox/omnibox_page_handler.h",
    "webui/omnibox/omnibox_ui.cc",
    "webui/omnibox/omnibox_ui.h",
    "webui/password_manager_internals/password_manager_internals_ui.cc",
    "webui/password_manager_internals/password_manager_internals_ui.h",
    "webui/policy_material_design_ui.cc",
    "webui/policy_material_design_ui.h",
    "webui/policy_ui.cc",
    "webui/policy_ui.h",
    "webui/policy_ui_handler.cc",
    "webui/policy_ui_handler.h",
    "webui/predictors/predictors_handler.cc",
    "webui/predictors/predictors_handler.h",
    "webui/predictors/predictors_ui.cc",
    "webui/predictors/predictors_ui.h",
    "webui/profiler_ui.cc",
    "webui/profiler_ui.h",
    "webui/signin_internals_ui.cc",
    "webui/signin_internals_ui.h",
    "webui/supervised_user_internals_message_handler.cc",
    "webui/supervised_user_internals_message_handler.h",
    "webui/supervised_user_internals_ui.cc",
    "webui/supervised_user_internals_ui.h",
    "webui/sync_internals_message_handler.cc",
    "webui/sync_internals_message_handler.h",
    "webui/sync_internals_ui.cc",
    "webui/sync_internals_ui.h",
    "webui/task_scheduler_internals/task_scheduler_internals_ui.cc",
    "webui/task_scheduler_internals/task_scheduler_internals_ui.h",
    "webui/test_files_request_filter.cc",
    "webui/test_files_request_filter.h",
    "webui/translate_internals/translate_internals_handler.cc",
    "webui/translate_internals/translate_internals_handler.h",
    "webui/translate_internals/translate_internals_ui.cc",
    "webui/translate_internals/translate_internals_ui.h",
    "webui/usb_internals/usb_internals_page_handler.cc",
    "webui/usb_internals/usb_internals_page_handler.h",
    "webui/usb_internals/usb_internals_ui.cc",
    "webui/usb_internals/usb_internals_ui.h",
    "webui/user_actions/user_actions_ui.cc",
    "webui/user_actions/user_actions_ui.h",
    "webui/user_actions/user_actions_ui_handler.cc",
    "webui/user_actions/user_actions_ui_handler.h",
    "webui/version_handler.cc",
    "webui/version_handler.h",
    "webui/version_handler_chromeos.cc",
    "webui/version_handler_chromeos.h",
    "webui/version_ui.cc",
    "webui/version_ui.h",
    "window_sizer/window_sizer_mac.mm",
    "zoom/chrome_zoom_level_otr_delegate.cc",
    "zoom/chrome_zoom_level_otr_delegate.h",
    "zoom/chrome_zoom_level_prefs.cc",
    "zoom/chrome_zoom_level_prefs.h",
  ]

  defines = []
  libs = []

  configs += [
    ":ui_warnings",
    "//build/config:precompiled_headers",
    "//build/config/compiler:wexit_time_destructors",
  ]

  # Since browser and browser_ui actually depend on each other,
  # we must omit the dependency from browser_ui to browser.
  # However, this means browser_ui and browser should more or less
  # have the same dependencies. Once browser_ui is untangled from
  # browser, then we can clean up these dependencies.
  public_deps = [
    "//components/dom_distiller/core",
    "//components/sync",
    "//components/translate/content/browser",
    "//content/public/browser",
  ]
  deps = [
    # NOTE: New dependencies should generally be added in the OS!="ios"
    # dependencies block below, rather than here.
    "//base",
    "//chrome:extra_resources",
    "//chrome:resources",
    "//chrome:strings",
    "//chrome/app:chrome_dll_resources",
    "//chrome/app:command_ids",
    "//chrome/app/resources:platform_locale_settings",
    "//chrome/app/theme:chrome_unscaled_resources",
    "//chrome/app/theme:theme_resources",
    "//chrome/browser:resource_prefetch_predictor_proto",
    "//chrome/browser/devtools",
    "//chrome/browser/ui/webui/engagement:mojo_bindings",
    "//chrome/browser/ui/webui/omnibox:mojo_bindings",
    "//chrome/browser/ui/webui/plugins:mojo_bindings",
    "//chrome/browser/ui/webui/usb_internals:mojo_bindings",
    "//chrome/common",
    "//chrome/common/net",
    "//chrome/installer/util:with_no_strings",
    "//components/app_modal",
    "//components/autofill/content/browser:risk_proto",
    "//components/autofill/core/browser",
    "//components/bookmarks/browser",
    "//components/bookmarks/managed",
    "//components/browser_sync",
    "//components/browsing_data/content",
    "//components/browsing_data/core",
    "//components/bubble:bubble",
    "//components/certificate_reporting:cert_logger_proto",
    "//components/certificate_reporting:encrypted_cert_logger_proto",
    "//components/content_settings/core/browser",
    "//components/crash/content/app",
    "//components/crash/core/browser",
    "//components/crx_file",
    "//components/data_reduction_proxy/core/browser",
    "//components/device_event_log",
    "//components/dom_distiller/content/browser",
    "//components/dom_distiller/webui",
    "//components/domain_reliability",
    "//components/favicon/content",
    "//components/favicon/core",
    "//components/feedback",
    "//components/flags_ui",
    "//components/gcm_driver",
    "//components/google/core/browser",
    "//components/guest_view/browser",
    "//components/history/content/browser",
    "//components/infobars/core",
    "//components/invalidation/impl",
    "//components/keyed_service/content",
    "//components/keyed_service/core",
    "//components/metrics:profiler",
    "//components/mime_util",
    "//components/net_log",
    "//components/ntp_snippets",
    "//components/ntp_tiles",
    "//components/offline_pages",
    "//components/offline_pages/background:background_offliner",
    "//components/omnibox/browser",
    "//components/onc",
    "//components/password_manager/content/browser",
    "//components/password_manager/core/browser",
    "//components/password_manager/sync/browser",
    "//components/pdf/browser",
    "//components/policy/core/browser",
    "//components/power",
    "//components/pref_registry",
    "//components/proximity_auth",
    "//components/proxy_config",
    "//components/query_parser",
    "//components/rappor",
    "//components/renderer_context_menu",
    "//components/resources",
    "//components/safe_browsing_db:safe_browsing_prefs",
    "//components/safe_json",
    "//components/search",
    "//components/search_engines",
    "//components/security_interstitials/core",
    "//components/security_state/content",
    "//components/security_state/core",
    "//components/sessions",
    "//components/signin/core/account_id",
    "//components/signin/core/browser",
    "//components/spellcheck/browser",
    "//components/ssl_errors",
    "//components/startup_metric_utils/browser:lib",
    "//components/strings",
    "//components/subresource_filter/content/browser",
    "//components/suggestions/proto",
    "//components/supervised_user_error_page",
    "//components/sync",
    "//components/sync_preferences",
    "//components/sync_sessions",
    "//components/toolbar",
    "//components/tracing:startup_tracing",
    "//components/undo",
    "//components/update_client",
    "//components/upload_list",
    "//components/url_formatter",
    "//components/user_manager",
    "//components/user_prefs",
    "//components/variations",
    "//components/variations/service",
    "//components/version_ui",
    "//components/web_cache/browser",
    "//components/web_resource",
    "//components/zoom",
    "//content/app/resources",
    "//content/public/common",
    "//crypto",
    "//device/base",
    "//device/bluetooth/public/interfaces:experimental_interfaces",
    "//device/usb",
    "//extensions/features",
    "//media",
    "//net:net_with_v8",
    "//printing/features",
    "//services/service_manager/runner/common",
    "//skia",
    "//storage/browser",
    "//storage/common",
    "//third_party/WebKit/public:features",
    "//third_party/WebKit/public:resources",
    "//third_party/adobe/flash:flapper_version_h",
    "//third_party/brotli:dec",
    "//third_party/cacheinvalidation",
    "//third_party/cld:cld_version",
    "//third_party/icu",
    "//third_party/leveldatabase",
    "//third_party/libjingle",
    "//third_party/re2",
    "//third_party/zlib",
    "//ui/accessibility",
    "//ui/base",
    "//ui/base/ime",
    "//ui/compositor",
    "//ui/content_accelerators",
    "//ui/display",
    "//ui/events",
    "//ui/events:gesture_detection",
    "//ui/gfx",
    "//ui/gfx/geometry",
    "//ui/message_center",
    "//ui/native_theme",
    "//ui/native_theme:native_theme_browser",
    "//ui/resources",
    "//ui/shell_dialogs",
    "//ui/snapshot",
    "//ui/strings",
    "//ui/surface",
    "//ui/web_dialogs",
    "//v8",
  ]
  allow_circular_includes_from = []

  if (enable_extensions) {
    deps += [
      "//components/drive",
      "//extensions/browser",
    ]
  }

  if (is_chromeos && use_cras) {
    defines += [ "USE_CRAS" ]
  }

  if (!android_java_ui) {
    sources += [
      "apps/app_info_dialog.h",
      "apps/chrome_app_delegate.cc",
      "apps/chrome_app_delegate.h",
      "apps/chrome_app_window_client.cc",
      "apps/chrome_app_window_client.h",
      "apps/directory_access_confirmation_dialog.cc",
      "apps/directory_access_confirmation_dialog.h",
      "blocked_content/app_modal_dialog_helper.cc",
      "blocked_content/app_modal_dialog_helper.h",
      "bluetooth/bluetooth_chooser_controller.cc",
      "bluetooth/bluetooth_chooser_controller.h",
      "bluetooth/bluetooth_chooser_desktop.cc",
      "bluetooth/bluetooth_chooser_desktop.h",
      "bluetooth/chrome_extension_bluetooth_chooser.cc",
      "bluetooth/chrome_extension_bluetooth_chooser.h",
      "bookmarks/bookmark_bubble_sign_in_delegate.cc",
      "bookmarks/bookmark_bubble_sign_in_delegate.h",
      "bookmarks/bookmark_context_menu_controller.cc",
      "bookmarks/bookmark_context_menu_controller.h",
      "bookmarks/bookmark_drag_drop.cc",
      "bookmarks/bookmark_drag_drop.h",
      "bookmarks/bookmark_tab_helper.cc",
      "bookmarks/bookmark_tab_helper.h",
      "bookmarks/bookmark_tab_helper_delegate.cc",
      "bookmarks/bookmark_tab_helper_delegate.h",
      "bookmarks/bookmark_utils_desktop.cc",
      "bookmarks/bookmark_utils_desktop.h",
      "bookmarks/enhanced_bookmark_key_service.cc",
      "bookmarks/enhanced_bookmark_key_service.h",
      "bookmarks/enhanced_bookmark_key_service_factory.cc",
      "bookmarks/enhanced_bookmark_key_service_factory.h",
      "browser.cc",
      "browser.h",
      "browser_command_controller.cc",
      "browser_command_controller.h",
      "browser_commands.cc",
      "browser_commands.h",
      "browser_content_setting_bubble_model_delegate.cc",
      "browser_content_setting_bubble_model_delegate.h",
      "browser_finder.cc",
      "browser_finder.h",
      "browser_instant_controller.cc",
      "browser_instant_controller.h",
      "browser_list.cc",
      "browser_list.h",
      "browser_live_tab_context.cc",
      "browser_live_tab_context.h",
      "browser_navigator.cc",
      "browser_navigator.h",
      "browser_otr_state.cc",
      "browser_otr_state.h",
      "browser_tab_restorer.cc",
      "browser_tab_strip_model_delegate.cc",
      "browser_tab_strip_model_delegate.h",
      "browser_tab_strip_tracker.cc",
      "browser_tab_strip_tracker.h",
      "browser_tab_strip_tracker_delegate.h",
      "browser_tabrestore.cc",
      "browser_tabrestore.h",
      "browser_tabstrip.cc",
      "browser_tabstrip.h",
      "browser_toolbar_model_delegate.cc",
      "browser_toolbar_model_delegate.h",
      "browser_view_prefs.cc",
      "browser_view_prefs.h",
      "browser_window_state.cc",
      "browser_window_state.h",
      "chrome_bubble_manager.cc",
      "chrome_bubble_manager.h",
      "chrome_pages.cc",
      "chrome_pages.h",
      "chrome_web_modal_dialog_manager_delegate.cc",
      "chrome_web_modal_dialog_manager_delegate.h",
      "collected_cookies_infobar_delegate.cc",
      "collected_cookies_infobar_delegate.h",
      "confirm_bubble_model.cc",
      "confirm_bubble_model.h",
      "content_settings/content_setting_bubble_model.cc",
      "content_settings/content_setting_bubble_model.h",
      "content_settings/content_setting_bubble_model_delegate.h",
      "content_settings/content_setting_image_model.cc",
      "content_settings/content_setting_image_model.h",
      "exclusive_access/exclusive_access_bubble.cc",
      "exclusive_access/exclusive_access_bubble.h",
      "exclusive_access/exclusive_access_bubble_type.cc",
      "exclusive_access/exclusive_access_bubble_type.h",
      "exclusive_access/exclusive_access_context.cc",
      "exclusive_access/exclusive_access_context.h",
      "exclusive_access/exclusive_access_controller_base.cc",
      "exclusive_access/exclusive_access_controller_base.h",
      "exclusive_access/exclusive_access_manager.cc",
      "exclusive_access/exclusive_access_manager.h",
      "exclusive_access/fullscreen_controller.cc",
      "exclusive_access/fullscreen_controller.h",
      "exclusive_access/fullscreen_within_tab_helper.cc",
      "exclusive_access/fullscreen_within_tab_helper.h",
      "exclusive_access/mouse_lock_controller.cc",
      "exclusive_access/mouse_lock_controller.h",
      "fast_unload_controller.cc",
      "fast_unload_controller.h",
      "find_bar/find_bar_controller.cc",
      "find_bar/find_bar_controller.h",
      "global_error/global_error.cc",
      "global_error/global_error.h",
      "global_error/global_error_bubble_view_base.h",
      "global_error/global_error_service.cc",
      "global_error/global_error_service.h",
      "global_error/global_error_service_factory.cc",
      "global_error/global_error_service_factory.h",
      "infobar_container_delegate.cc",
      "infobar_container_delegate.h",
      "javascript_dialogs/javascript_dialog.h",
      "javascript_dialogs/javascript_dialog_tab_helper.cc",
      "javascript_dialogs/javascript_dialog_tab_helper.h",
      "javascript_dialogs/javascript_dialog_views.cc",
      "javascript_dialogs/javascript_dialog_views.h",
      "layout_constants.cc",
      "layout_constants.h",
      "location_bar/location_bar.cc",
      "location_bar/location_bar.h",
      "location_bar/location_bar_util.cc",
      "location_bar/location_bar_util.h",
      "native_window_tracker.h",
      "omnibox/alternate_nav_infobar_delegate.cc",
      "omnibox/alternate_nav_infobar_delegate.h",
      "omnibox/chrome_omnibox_client.cc",
      "omnibox/chrome_omnibox_client.h",
      "omnibox/chrome_omnibox_edit_controller.cc",
      "omnibox/chrome_omnibox_edit_controller.h",
      "omnibox/chrome_omnibox_navigation_observer.cc",
      "omnibox/chrome_omnibox_navigation_observer.h",
      "omnibox/clipboard_utils.cc",
      "omnibox/clipboard_utils.h",
      "passwords/manage_passwords_bubble_model.cc",
      "passwords/manage_passwords_bubble_model.h",
      "passwords/manage_passwords_icon_view.h",
      "passwords/manage_passwords_ui_controller.cc",
      "passwords/manage_passwords_ui_controller.h",
      "passwords/manage_passwords_view_utils_desktop.cc",
      "passwords/manage_passwords_view_utils_desktop.h",
      "passwords/password_dialog_controller.h",
      "passwords/password_dialog_controller_impl.cc",
      "passwords/password_dialog_controller_impl.h",
      "passwords/password_dialog_prompts.h",
      "passwords/passwords_client_ui_delegate.cc",
      "passwords/passwords_client_ui_delegate.h",
      "passwords/passwords_model_delegate.cc",
      "passwords/passwords_model_delegate.h",
      "pdf/adobe_reader_info_win.cc",
      "pdf/adobe_reader_info_win.h",
      "pdf/chrome_pdf_web_contents_helper_client.cc",
      "pdf/chrome_pdf_web_contents_helper_client.h",
      "pdf/pdf_unsupported_feature.cc",
      "pdf/pdf_unsupported_feature.h",
      "sad_tab.cc",
      "sad_tab.h",
      "sad_tab_helper.cc",
      "sad_tab_helper.h",
      "sad_tab_types.h",
      "scoped_tabbed_browser_displayer.cc",
      "scoped_tabbed_browser_displayer.h",
      "search/instant_controller.cc",
      "search/instant_controller.h",
      "search/search_delegate.cc",
      "search/search_delegate.h",
      "settings_window_manager.cc",
      "settings_window_manager.h",
      "settings_window_manager_observer.h",
      "signin_view_controller.cc",
      "signin_view_controller.h",
      "signin_view_controller_delegate.cc",
      "signin_view_controller_delegate.h",
      "singleton_tabs.cc",
      "singleton_tabs.h",
      "startup/bad_flags_prompt.cc",
      "startup/bad_flags_prompt.h",
      "startup/google_api_keys_infobar_delegate.cc",
      "startup/google_api_keys_infobar_delegate.h",
      "startup/obsolete_system_infobar_delegate.cc",
      "startup/obsolete_system_infobar_delegate.h",
      "startup/session_crashed_infobar_delegate.cc",
      "startup/session_crashed_infobar_delegate.h",
      "startup/startup_browser_creator.cc",
      "startup/startup_browser_creator.h",
      "startup/startup_browser_creator_impl.cc",
      "startup/startup_browser_creator_impl.h",
      "startup/startup_features.cc",
      "startup/startup_features.h",
      "startup/startup_tab.cc",
      "startup/startup_tab.h",
      "startup/startup_tab_provider.cc",
      "startup/startup_tab_provider.h",
      "startup/startup_types.h",
      "sync/browser_synced_window_delegate.cc",
      "sync/browser_synced_window_delegate.h",
      "sync/browser_synced_window_delegates_getter.cc",
      "sync/browser_synced_window_delegates_getter.h",
      "sync/sync_promo_ui.cc",
      "sync/sync_promo_ui.h",
      "tab_contents/tab_contents_iterator.cc",
      "tab_contents/tab_contents_iterator.h",
      "tab_modal_confirm_dialog_delegate.cc",
      "tab_modal_confirm_dialog_delegate.h",
      "tabs/hover_tab_selector.cc",
      "tabs/hover_tab_selector.h",
      "tabs/pinned_tab_codec.cc",
      "tabs/pinned_tab_codec.h",
      "tabs/pinned_tab_service.cc",
      "tabs/pinned_tab_service.h",
      "tabs/pinned_tab_service_factory.cc",
      "tabs/pinned_tab_service_factory.h",
      "tabs/tab_menu_model.cc",
      "tabs/tab_menu_model.h",
      "tabs/tab_strip_model.cc",
      "tabs/tab_strip_model.h",
      "tabs/tab_strip_model_delegate.h",
      "tabs/tab_strip_model_observer.cc",
      "tabs/tab_strip_model_observer.h",
      "tabs/tab_strip_model_order_controller.cc",
      "tabs/tab_strip_model_order_controller.h",
      "tabs/tab_strip_model_stats_recorder.cc",
      "tabs/tab_strip_model_stats_recorder.h",
      "tabs/tab_strip_model_utils.cc",
      "tabs/tab_strip_model_utils.h",
      "tabs/tab_utils.cc",
      "tabs/tab_utils.h",
      "task_manager/task_manager_columns.cc",
      "task_manager/task_manager_columns.h",
      "task_manager/task_manager_table_model.cc",
      "task_manager/task_manager_table_model.h",
      "toolbar/app_menu_icon_controller.cc",
      "toolbar/app_menu_icon_controller.h",
      "toolbar/app_menu_model.cc",
      "toolbar/app_menu_model.h",
      "toolbar/back_forward_menu_model.cc",
      "toolbar/back_forward_menu_model.h",
      "toolbar/bookmark_sub_menu_model.cc",
      "toolbar/bookmark_sub_menu_model.h",
      "toolbar/component_toolbar_actions_factory.cc",
      "toolbar/component_toolbar_actions_factory.h",
      "toolbar/recent_tabs_sub_menu_model.cc",
      "toolbar/recent_tabs_sub_menu_model.h",
      "toolbar/toolbar_action_view_controller.h",
      "toolbar/toolbar_action_view_delegate.h",
      "toolbar/toolbar_actions_bar.cc",
      "toolbar/toolbar_actions_bar.h",
      "toolbar/toolbar_actions_bar_bubble_delegate.h",
      "toolbar/toolbar_actions_bar_delegate.h",
      "toolbar/toolbar_actions_bar_observer.h",
      "translate/translate_bubble_factory.cc",
      "translate/translate_bubble_factory.h",
      "uma_browsing_activity_observer.cc",
      "uma_browsing_activity_observer.h",
      "unload_controller.cc",
      "unload_controller.h",
      "user_manager.cc",
      "user_manager.h",
      "website_settings/chooser_bubble_delegate.cc",
      "website_settings/chooser_bubble_delegate.h",
      "website_settings/permission_menu_model.cc",
      "website_settings/permission_menu_model.h",
      "website_settings/website_settings_infobar_delegate.cc",
      "website_settings/website_settings_infobar_delegate.h",
      "webui/app_launcher_login_handler.cc",
      "webui/app_launcher_login_handler.h",
      "webui/bookmarks_ui.cc",
      "webui/bookmarks_ui.h",
      "webui/chrome_web_contents_handler.cc",
      "webui/chrome_web_contents_handler.h",
      "webui/constrained_web_dialog_delegate_base.cc",
      "webui/constrained_web_dialog_delegate_base.h",
      "webui/devtools_ui.cc",
      "webui/devtools_ui.h",
      "webui/extensions/extension_loader_handler.cc",
      "webui/extensions/extension_loader_handler.h",
      "webui/extensions/extension_settings_handler.cc",
      "webui/extensions/extension_settings_handler.h",
      "webui/extensions/extensions_ui.cc",
      "webui/extensions/extensions_ui.h",
      "webui/extensions/install_extension_handler.cc",
      "webui/extensions/install_extension_handler.h",
      "webui/foreign_session_handler.cc",
      "webui/foreign_session_handler.h",
      "webui/help/help_handler.cc",
      "webui/help/help_handler.h",
      "webui/help/help_ui.cc",
      "webui/help/help_ui.h",
      "webui/help/help_utils_chromeos.cc",
      "webui/help/help_utils_chromeos.h",
      "webui/help/version_updater.h",
      "webui/help/version_updater_chromeos.cc",
      "webui/help/version_updater_chromeos.h",
      "webui/help/version_updater_mac.h",
      "webui/help/version_updater_mac.mm",
      "webui/help/version_updater_win.cc",
      "webui/history_login_handler.cc",
      "webui/history_login_handler.h",
      "webui/identity_internals_ui.cc",
      "webui/identity_internals_ui.h",
      "webui/inspect_ui.cc",
      "webui/inspect_ui.h",
      "webui/md_bookmarks/md_bookmarks_ui.cc",
      "webui/md_bookmarks/md_bookmarks_ui.h",
      "webui/md_downloads/downloads_list_tracker.cc",
      "webui/md_downloads/downloads_list_tracker.h",
      "webui/md_downloads/md_downloads_dom_handler.cc",
      "webui/md_downloads/md_downloads_dom_handler.h",
      "webui/md_downloads/md_downloads_ui.cc",
      "webui/md_downloads/md_downloads_ui.h",
      "webui/md_feedback/md_feedback_dialog_controller.cc",
      "webui/md_feedback/md_feedback_dialog_controller.h",
      "webui/md_feedback/md_feedback_ui.cc",
      "webui/md_feedback/md_feedback_ui.h",
      "webui/md_feedback/md_feedback_webui_message_handler.cc",
      "webui/md_feedback/md_feedback_webui_message_handler.h",
      "webui/md_history_ui.cc",
      "webui/md_history_ui.h",
      "webui/ntp/app_launcher_handler.cc",
      "webui/ntp/app_launcher_handler.h",
      "webui/ntp/app_resource_cache_factory.cc",
      "webui/ntp/app_resource_cache_factory.h",
      "webui/ntp/core_app_launcher_handler.cc",
      "webui/ntp/core_app_launcher_handler.h",
      "webui/ntp/favicon_webui_handler.cc",
      "webui/ntp/favicon_webui_handler.h",
      "webui/ntp/new_tab_ui.cc",
      "webui/ntp/new_tab_ui.h",
      "webui/ntp/ntp_resource_cache.cc",
      "webui/ntp/ntp_resource_cache.h",
      "webui/ntp/ntp_resource_cache_factory.cc",
      "webui/ntp/ntp_resource_cache_factory.h",
      "webui/options/autofill_options_handler.cc",
      "webui/options/autofill_options_handler.h",
      "webui/options/automatic_settings_reset_handler.cc",
      "webui/options/automatic_settings_reset_handler.h",
      "webui/options/browser_options_handler.cc",
      "webui/options/browser_options_handler.h",
      "webui/options/chromeos/accounts_options_handler.cc",
      "webui/options/chromeos/accounts_options_handler.h",
      "webui/options/chromeos/bluetooth_options_handler.cc",
      "webui/options/chromeos/bluetooth_options_handler.h",
      "webui/options/chromeos/change_picture_options_handler.cc",
      "webui/options/chromeos/change_picture_options_handler.h",
      "webui/options/chromeos/core_chromeos_options_handler.cc",
      "webui/options/chromeos/core_chromeos_options_handler.h",
      "webui/options/chromeos/cros_language_options_handler.cc",
      "webui/options/chromeos/cros_language_options_handler.h",
      "webui/options/chromeos/date_time_options_handler.cc",
      "webui/options/chromeos/date_time_options_handler.h",
      "webui/options/chromeos/display_options_handler.cc",
      "webui/options/chromeos/display_options_handler.h",
      "webui/options/chromeos/display_overscan_handler.cc",
      "webui/options/chromeos/display_overscan_handler.h",
      "webui/options/chromeos/internet_options_handler.cc",
      "webui/options/chromeos/internet_options_handler.h",
      "webui/options/chromeos/internet_options_handler_strings.cc",
      "webui/options/chromeos/internet_options_handler_strings.h",
      "webui/options/chromeos/keyboard_handler.cc",
      "webui/options/chromeos/keyboard_handler.h",
      "webui/options/chromeos/options_stylus_handler.cc",
      "webui/options/chromeos/options_stylus_handler.h",
      "webui/options/chromeos/pointer_handler.cc",
      "webui/options/chromeos/pointer_handler.h",
      "webui/options/chromeos/power_handler.cc",
      "webui/options/chromeos/power_handler.h",
      "webui/options/chromeos/proxy_handler.cc",
      "webui/options/chromeos/proxy_handler.h",
      "webui/options/chromeos/stats_options_handler.cc",
      "webui/options/chromeos/stats_options_handler.h",
      "webui/options/chromeos/storage_manager_handler.cc",
      "webui/options/chromeos/storage_manager_handler.h",
      "webui/options/chromeos/user_image_source.cc",
      "webui/options/chromeos/user_image_source.h",
      "webui/options/clear_browser_data_handler.cc",
      "webui/options/clear_browser_data_handler.h",
      "webui/options/content_settings_handler.cc",
      "webui/options/content_settings_handler.h",
      "webui/options/cookies_view_handler.cc",
      "webui/options/cookies_view_handler.h",
      "webui/options/core_options_handler.cc",
      "webui/options/core_options_handler.h",
      "webui/options/create_profile_handler.cc",
      "webui/options/create_profile_handler.h",
      "webui/options/easy_unlock_handler.cc",
      "webui/options/easy_unlock_handler.h",
      "webui/options/font_settings_handler.cc",
      "webui/options/font_settings_handler.h",
      "webui/options/font_settings_utils.cc",
      "webui/options/font_settings_utils.h",
      "webui/options/font_settings_utils_linux.cc",
      "webui/options/font_settings_utils_mac.mm",
      "webui/options/font_settings_utils_win.cc",
      "webui/options/handler_options_handler.cc",
      "webui/options/handler_options_handler.h",
      "webui/options/help_overlay_handler.cc",
      "webui/options/help_overlay_handler.h",
      "webui/options/home_page_overlay_handler.cc",
      "webui/options/home_page_overlay_handler.h",
      "webui/options/import_data_handler.cc",
      "webui/options/import_data_handler.h",
      "webui/options/language_dictionary_overlay_handler.cc",
      "webui/options/language_dictionary_overlay_handler.h",
      "webui/options/language_options_handler.cc",
      "webui/options/language_options_handler.h",
      "webui/options/language_options_handler_common.cc",
      "webui/options/language_options_handler_common.h",
      "webui/options/manage_profile_handler.cc",
      "webui/options/manage_profile_handler.h",
      "webui/options/media_devices_selection_handler.cc",
      "webui/options/media_devices_selection_handler.h",
      "webui/options/options_ui.cc",
      "webui/options/options_ui.h",
      "webui/options/password_manager_handler.cc",
      "webui/options/password_manager_handler.h",
      "webui/options/pepper_flash_content_settings_utils.cc",
      "webui/options/pepper_flash_content_settings_utils.h",
      "webui/options/reset_profile_settings_handler.cc",
      "webui/options/reset_profile_settings_handler.h",
      "webui/options/search_engine_manager_handler.cc",
      "webui/options/search_engine_manager_handler.h",
      "webui/options/startup_pages_handler.cc",
      "webui/options/startup_pages_handler.h",
      "webui/options/supervised_user_create_confirm_handler.cc",
      "webui/options/supervised_user_create_confirm_handler.h",
      "webui/options/supervised_user_import_handler.cc",
      "webui/options/supervised_user_import_handler.h",
      "webui/options/supervised_user_learn_more_handler.cc",
      "webui/options/supervised_user_learn_more_handler.h",
      "webui/options/sync_setup_handler.cc",
      "webui/options/sync_setup_handler.h",
      "webui/policy_indicator_localized_strings_provider.cc",
      "webui/policy_indicator_localized_strings_provider.h",
      "webui/profile_helper.cc",
      "webui/profile_helper.h",
      "webui/profile_info_watcher.cc",
      "webui/profile_info_watcher.h",
      "webui/quota_internals/quota_internals_handler.cc",
      "webui/quota_internals/quota_internals_handler.h",
      "webui/quota_internals/quota_internals_proxy.cc",
      "webui/quota_internals/quota_internals_proxy.h",
      "webui/quota_internals/quota_internals_types.cc",
      "webui/quota_internals/quota_internals_types.h",
      "webui/quota_internals/quota_internals_ui.cc",
      "webui/quota_internals/quota_internals_ui.h",
      "webui/set_as_default_browser_ui_win.cc",
      "webui/set_as_default_browser_ui_win.h",
      "webui/settings/about_handler.cc",
      "webui/settings/about_handler.h",
      "webui/settings/appearance_handler.cc",
      "webui/settings/appearance_handler.h",
      "webui/settings/browser_lifetime_handler.cc",
      "webui/settings/browser_lifetime_handler.h",
      "webui/settings/chromeos/accessibility_handler.cc",
      "webui/settings/chromeos/accessibility_handler.h",
      "webui/settings/chromeos/change_picture_handler.cc",
      "webui/settings/chromeos/change_picture_handler.h",
      "webui/settings/chromeos/cups_printers_handler.cc",
      "webui/settings/chromeos/cups_printers_handler.h",
      "webui/settings/chromeos/date_time_handler.cc",
      "webui/settings/chromeos/date_time_handler.h",
      "webui/settings/chromeos/device_keyboard_handler.cc",
      "webui/settings/chromeos/device_keyboard_handler.h",
      "webui/settings/chromeos/device_pointer_handler.cc",
      "webui/settings/chromeos/device_pointer_handler.h",
      "webui/settings/chromeos/device_storage_handler.cc",
      "webui/settings/chromeos/device_storage_handler.h",
      "webui/settings/chromeos/easy_unlock_settings_handler.cc",
      "webui/settings/chromeos/easy_unlock_settings_handler.h",
      "webui/settings/chromeos/internet_handler.cc",
      "webui/settings/chromeos/internet_handler.h",
      "webui/settings/downloads_handler.cc",
      "webui/settings/downloads_handler.h",
      "webui/settings/extension_control_handler.cc",
      "webui/settings/extension_control_handler.h",
      "webui/settings/font_handler.cc",
      "webui/settings/font_handler.h",
      "webui/settings/languages_handler.cc",
      "webui/settings/languages_handler.h",
      "webui/settings/md_settings_localized_strings_provider.cc",
      "webui/settings/md_settings_localized_strings_provider.h",
      "webui/settings/md_settings_ui.cc",
      "webui/settings/md_settings_ui.h",
      "webui/settings/metrics_reporting_handler.cc",
      "webui/settings/metrics_reporting_handler.h",
      "webui/settings/on_startup_handler.cc",
      "webui/settings/on_startup_handler.h",
      "webui/settings/people_handler.cc",
      "webui/settings/people_handler.h",
      "webui/settings/profile_info_handler.cc",
      "webui/settings/profile_info_handler.h",
      "webui/settings/protocol_handlers_handler.cc",
      "webui/settings/protocol_handlers_handler.h",
      "webui/settings/reset_settings_handler.cc",
      "webui/settings/reset_settings_handler.h",
      "webui/settings/safe_browsing_handler.cc",
      "webui/settings/safe_browsing_handler.h",
      "webui/settings/search_engines_handler.cc",
      "webui/settings/search_engines_handler.h",
      "webui/settings/settings_clear_browsing_data_handler.cc",
      "webui/settings/settings_clear_browsing_data_handler.h",
      "webui/settings/settings_cookies_view_handler.cc",
      "webui/settings/settings_cookies_view_handler.h",
      "webui/settings/settings_import_data_handler.cc",
      "webui/settings/settings_import_data_handler.h",
      "webui/settings/settings_manage_profile_handler.cc",
      "webui/settings/settings_manage_profile_handler.h",
      "webui/settings/settings_media_devices_selection_handler.cc",
      "webui/settings/settings_media_devices_selection_handler.h",
      "webui/settings/settings_page_ui_handler.cc",
      "webui/settings/settings_page_ui_handler.h",
      "webui/settings/settings_startup_pages_handler.cc",
      "webui/settings/settings_startup_pages_handler.h",
      "webui/settings/site_settings_handler.cc",
      "webui/settings/site_settings_handler.h",
      "webui/settings_utils.cc",
      "webui/settings_utils.h",
      "webui/signin/login_ui_service.cc",
      "webui/signin/login_ui_service.h",
      "webui/signin/login_ui_service_factory.cc",
      "webui/signin/login_ui_service_factory.h",
      "webui/signin/profile_signin_confirmation_dialog.cc",
      "webui/signin/profile_signin_confirmation_dialog.h",
      "webui/signin/profile_signin_confirmation_ui.cc",
      "webui/signin/profile_signin_confirmation_ui.h",
      "webui/signin/signin_utils.cc",
      "webui/signin/signin_utils.h",
      "webui/site_settings_helper.cc",
      "webui/site_settings_helper.h",
      "webui/sync_file_system_internals/dump_database_handler.cc",
      "webui/sync_file_system_internals/dump_database_handler.h",
      "webui/sync_file_system_internals/extension_statuses_handler.cc",
      "webui/sync_file_system_internals/extension_statuses_handler.h",
      "webui/sync_file_system_internals/file_metadata_handler.cc",
      "webui/sync_file_system_internals/file_metadata_handler.h",
      "webui/sync_file_system_internals/sync_file_system_internals_handler.cc",
      "webui/sync_file_system_internals/sync_file_system_internals_handler.h",
      "webui/sync_file_system_internals/sync_file_system_internals_ui.cc",
      "webui/sync_file_system_internals/sync_file_system_internals_ui.h",
      "webui/system_info_ui.cc",
      "webui/system_info_ui.h",
      "webui/theme_handler.cc",
      "webui/theme_handler.h",
      "webui/uber/uber_ui.cc",
      "webui/uber/uber_ui.h",
      "window_sizer/window_sizer.cc",
      "window_sizer/window_sizer.h",
    ]
    deps += [
      "//apps",
      "//chrome/browser/profile_resetter:profile_reset_report_proto",
      "//chrome/common:features",
      "//components/feedback/proto",
      "//components/proximity_auth/webui",
      "//components/web_modal",
      "//device/bluetooth",
      "//mash/public/interfaces",
    ]
  }

  if (enable_basic_printing || enable_print_preview) {
    deps += [ "//printing" ]
  }

  if (enable_nacl) {
    sources += [
      "webui/nacl_ui.cc",
      "webui/nacl_ui.h",
    ]
    deps += [ "//components/nacl/browser" ]
  }
  if (enable_plugins) {
    sources += [
      "hung_plugin_tab_helper.cc",
      "hung_plugin_tab_helper.h",
      "webui/flash_ui.cc",
      "webui/flash_ui.h",
      "webui/plugins/plugins_handler.cc",
      "webui/plugins/plugins_handler.h",
      "webui/plugins/plugins_ui.cc",
      "webui/plugins/plugins_ui.h",
    ]
    deps += [ "//ppapi/proxy:ipc" ]
  }
  if (safe_browsing_mode == 1) {
    deps += [
      "//chrome/browser/safe_browsing:chunk_proto",
      "//chrome/common/safe_browsing:proto",
    ]
  }

  if (is_chromeos && !is_official_build) {
    sources += [
      "webui/chromeos/emulator/device_emulator_message_handler.cc",
      "webui/chromeos/emulator/device_emulator_message_handler.h",
      "webui/chromeos/emulator/device_emulator_ui.cc",
      "webui/chromeos/emulator/device_emulator_ui.h",
    ]
  }

  if (is_chromeos) {
    sources += [
      "app_list/search/launcher_search/launcher_search_icon_image_loader.cc",
      "app_list/search/launcher_search/launcher_search_icon_image_loader.h",
      "app_list/search/launcher_search/launcher_search_icon_image_loader_impl.cc",
      "app_list/search/launcher_search/launcher_search_icon_image_loader_impl.h",
      "app_list/search/launcher_search/launcher_search_provider.cc",
      "app_list/search/launcher_search/launcher_search_provider.h",
      "app_list/search/launcher_search/launcher_search_result.cc",
      "app_list/search/launcher_search/launcher_search_result.h",
      "ash/system_tray_client.cc",
      "ash/system_tray_client.h",
      "extensions/extension_installed_notification.cc",
      "extensions/extension_installed_notification.h",
      "input_method/input_method_engine_base.cc",
      "input_method/input_method_engine_base.h",
      "views/apps/chrome_native_app_window_views_aura_ash.cc",
      "views/apps/chrome_native_app_window_views_aura_ash.h",
      "views/intent_picker_bubble_view.cc",
      "views/intent_picker_bubble_view.h",

      # On chromeos, file manager extension handles the file open/save dialog.
      "views/select_file_dialog_extension.cc",
      "views/select_file_dialog_extension.h",
      "views/select_file_dialog_extension_factory.cc",
      "views/select_file_dialog_extension_factory.h",
      "webui/cast/cast_ui.cc",
      "webui/cast/cast_ui.h",
    ]
    deps += [
      "//chrome/browser/chromeos",
      "//components/arc",
      "//components/drive:drive_chromeos",
      "//components/exo",
      "//components/login",
      "//ui/base/ime",
      "//ui/chromeos",
    ]
    if (enable_rlz) {
      deps += [ "//chrome/browser:rlz" ]
    }
  }
  if (use_cups) {
    configs += [ "//printing:cups" ]
  }
  if (use_ash) {
    sources += [
      "ash/app_list/app_list_controller_ash.cc",
      "ash/app_list/app_list_controller_ash.h",
      "ash/app_list/app_list_presenter_delegate_mus.cc",
      "ash/app_list/app_list_presenter_delegate_mus.h",
      "ash/app_list/app_list_presenter_service.cc",
      "ash/app_list/app_list_presenter_service.h",
      "ash/app_list/app_list_service_ash.cc",
      "ash/app_list/app_list_service_ash.h",
      "ash/app_list/app_sync_ui_state_watcher.cc",
      "ash/app_list/app_sync_ui_state_watcher.h",
      "ash/app_sync_ui_state.cc",
      "ash/app_sync_ui_state.h",
      "ash/app_sync_ui_state_factory.cc",
      "ash/app_sync_ui_state_factory.h",
      "ash/app_sync_ui_state_observer.h",
      "ash/ash_init.cc",
      "ash/ash_init.h",
      "ash/ash_util.cc",
      "ash/ash_util.h",
      "ash/cast_config_delegate_media_router.cc",
      "ash/cast_config_delegate_media_router.h",
      "ash/chrome_keyboard_ui.cc",
      "ash/chrome_keyboard_ui.h",
      "ash/chrome_launcher_prefs.cc",
      "ash/chrome_launcher_prefs.h",
      "ash/chrome_new_window_client.cc",
      "ash/chrome_new_window_client.h",
      "ash/chrome_screenshot_grabber.cc",
      "ash/chrome_screenshot_grabber.h",
      "ash/chrome_shell_content_state.cc",
      "ash/chrome_shell_content_state.h",
      "ash/chrome_shell_content_state_chromeos.cc",
      "ash/chrome_shell_delegate.cc",
      "ash/chrome_shell_delegate.h",
      "ash/ime_controller_chromeos.cc",
      "ash/ime_controller_chromeos.h",
      "ash/ime_driver_ash.cc",
      "ash/ime_driver_ash.h",
      "ash/keyboard_ui_service.cc",
      "ash/keyboard_ui_service.h",
      "ash/launcher/app_shortcut_launcher_item_controller.cc",
      "ash/launcher/app_shortcut_launcher_item_controller.h",
      "ash/launcher/app_window_launcher_controller.cc",
      "ash/launcher/app_window_launcher_controller.h",
      "ash/launcher/app_window_launcher_item_controller.cc",
      "ash/launcher/app_window_launcher_item_controller.h",
      "ash/launcher/arc_playstore_shortcut_launcher_item_controller.cc",
      "ash/launcher/arc_playstore_shortcut_launcher_item_controller.h",
      "ash/launcher/browser_shortcut_launcher_item_controller.cc",
      "ash/launcher/browser_shortcut_launcher_item_controller.h",
      "ash/launcher/browser_status_monitor.cc",
      "ash/launcher/browser_status_monitor.h",
      "ash/launcher/chrome_launcher_app_menu_item.cc",
      "ash/launcher/chrome_launcher_app_menu_item.h",
      "ash/launcher/chrome_launcher_app_menu_item_browser.cc",
      "ash/launcher/chrome_launcher_app_menu_item_browser.h",
      "ash/launcher/chrome_launcher_app_menu_item_tab.cc",
      "ash/launcher/chrome_launcher_app_menu_item_tab.h",
      "ash/launcher/chrome_launcher_app_menu_item_v2app.cc",
      "ash/launcher/chrome_launcher_app_menu_item_v2app.h",
      "ash/launcher/chrome_launcher_controller.cc",
      "ash/launcher/chrome_launcher_controller.h",
      "ash/launcher/chrome_launcher_controller_impl.cc",
      "ash/launcher/chrome_launcher_controller_impl.h",
      "ash/launcher/chrome_launcher_controller_mus.cc",
      "ash/launcher/chrome_launcher_controller_mus.h",
      "ash/launcher/chrome_launcher_controller_util.cc",
      "ash/launcher/chrome_launcher_controller_util.h",
      "ash/launcher/desktop_shell_launcher_context_menu.cc",
      "ash/launcher/desktop_shell_launcher_context_menu.h",
      "ash/launcher/extension_app_window_launcher_controller.cc",
      "ash/launcher/extension_app_window_launcher_controller.h",
      "ash/launcher/extension_app_window_launcher_item_controller.cc",
      "ash/launcher/extension_app_window_launcher_item_controller.h",
      "ash/launcher/extension_launcher_context_menu.cc",
      "ash/launcher/extension_launcher_context_menu.h",
      "ash/launcher/launcher_app_updater.cc",
      "ash/launcher/launcher_app_updater.h",
      "ash/launcher/launcher_application_menu_item_model.cc",
      "ash/launcher/launcher_application_menu_item_model.h",
      "ash/launcher/launcher_context_menu.cc",
      "ash/launcher/launcher_context_menu.h",
      "ash/launcher/launcher_controller_helper.cc",
      "ash/launcher/launcher_controller_helper.h",
      "ash/launcher/launcher_extension_app_updater.cc",
      "ash/launcher/launcher_extension_app_updater.h",
      "ash/launcher/launcher_favicon_loader.cc",
      "ash/launcher/launcher_favicon_loader.h",
      "ash/launcher/launcher_item_controller.cc",
      "ash/launcher/launcher_item_controller.h",
      "ash/launcher/multi_profile_app_window_launcher_controller.cc",
      "ash/launcher/multi_profile_app_window_launcher_controller.h",
      "ash/launcher/multi_profile_browser_status_monitor.cc",
      "ash/launcher/multi_profile_browser_status_monitor.h",
      "ash/launcher/settings_window_observer.cc",
      "ash/launcher/settings_window_observer.h",
      "ash/media_delegate_chromeos.cc",
      "ash/media_delegate_chromeos.h",
      "ash/multi_user/multi_user_context_menu.h",
      "ash/multi_user/multi_user_context_menu_chromeos.cc",
      "ash/multi_user/multi_user_notification_blocker_chromeos.cc",
      "ash/multi_user/multi_user_notification_blocker_chromeos.h",
      "ash/multi_user/multi_user_util.cc",
      "ash/multi_user/multi_user_util.h",
      "ash/multi_user/multi_user_warning_dialog.cc",
      "ash/multi_user/multi_user_warning_dialog.h",
      "ash/multi_user/multi_user_window_manager.cc",
      "ash/multi_user/multi_user_window_manager.h",
      "ash/multi_user/multi_user_window_manager_chromeos.cc",
      "ash/multi_user/multi_user_window_manager_chromeos.h",
      "ash/multi_user/multi_user_window_manager_stub.cc",
      "ash/multi_user/multi_user_window_manager_stub.h",
      "ash/multi_user/user_switch_animator_chromeos.cc",
      "ash/multi_user/user_switch_animator_chromeos.h",
      "ash/multi_user/user_switch_util.cc",
      "ash/multi_user/user_switch_util.h",
      "ash/networking_config_delegate_chromeos.cc",
      "ash/networking_config_delegate_chromeos.h",
      "ash/palette_delegate_chromeos.cc",
      "ash/palette_delegate_chromeos.h",
      "ash/property_util.cc",
      "ash/property_util.h",
      "ash/session_state_delegate_chromeos.cc",
      "ash/session_state_delegate_chromeos.h",
      "ash/session_util.cc",
      "ash/session_util.h",
      "ash/system_tray_delegate_chromeos.cc",
      "ash/system_tray_delegate_chromeos.h",
      "ash/system_tray_delegate_utils.cc",
      "ash/system_tray_delegate_utils.h",
      "ash/volume_controller_chromeos.cc",
      "ash/volume_controller_chromeos.h",
      "ash/vpn_delegate_chromeos.cc",
      "ash/vpn_delegate_chromeos.h",
      "views/ash/chrome_browser_main_extra_parts_ash.cc",
      "views/ash/chrome_browser_main_extra_parts_ash.h",
      "views/ash/tab_scrubber.cc",
      "views/ash/tab_scrubber.h",
      "views/touch_uma/touch_uma_ash.cc",
      "window_sizer/window_sizer_ash.cc",
    ]
    deps += [
      "//ash",
      "//ash:ash_with_content",
      "//ash/common/strings",
      "//ash/public/cpp",
      "//ash/public/interfaces",
      "//components/session_manager/core",
      "//components/user_manager",
      "//services/ui/public/cpp",
      "//services/ui/public/interfaces",
      "//ui/app_list/presenter",
      "//ui/app_list/presenter:mojom",
      "//ui/keyboard:mojom",
    ]
  } else {  # Not ash.
    sources += [ "views/touch_uma/touch_uma.cc" ]
  }
  if (toolkit_views) {
    sources += [
      "autofill/save_card_bubble_controller.h",
      "autofill/save_card_bubble_controller_impl.cc",
      "autofill/save_card_bubble_controller_impl.h",
      "autofill/save_card_bubble_view.h",
      "browser_dialogs_mac.cc",
      "views/apps/app_info_dialog/app_info_dialog_container.cc",
      "views/apps/app_info_dialog/app_info_dialog_container.h",
      "views/apps/app_info_dialog/app_info_dialog_views.cc",
      "views/apps/app_info_dialog/app_info_dialog_views.h",
      "views/apps/app_info_dialog/app_info_footer_panel.cc",
      "views/apps/app_info_dialog/app_info_footer_panel.h",
      "views/apps/app_info_dialog/app_info_header_panel.cc",
      "views/apps/app_info_dialog/app_info_header_panel.h",
      "views/apps/app_info_dialog/app_info_panel.cc",
      "views/apps/app_info_dialog/app_info_panel.h",
      "views/apps/app_info_dialog/app_info_permissions_panel.cc",
      "views/apps/app_info_dialog/app_info_permissions_panel.h",
      "views/apps/app_info_dialog/app_info_summary_panel.cc",
      "views/apps/app_info_dialog/app_info_summary_panel.h",
      "views/apps/app_window_native_widget_mac.h",
      "views/apps/app_window_native_widget_mac.mm",
      "views/apps/chrome_native_app_window_views.cc",
      "views/apps/chrome_native_app_window_views.h",
      "views/apps/chrome_native_app_window_views_mac.h",
      "views/apps/chrome_native_app_window_views_mac.mm",
      "views/apps/native_app_window_frame_view_mac.h",
      "views/apps/native_app_window_frame_view_mac.mm",
      "views/autofill/card_unmask_prompt_views.cc",
      "views/autofill/card_unmask_prompt_views.h",
      "views/autofill/info_bubble.cc",
      "views/autofill/info_bubble.h",
      "views/autofill/tooltip_icon.cc",
      "views/autofill/tooltip_icon.h",
      "views/bookmarks/bookmark_bubble_view.cc",
      "views/bookmarks/bookmark_bubble_view.h",
      "views/bookmarks/bookmark_editor_view.cc",
      "views/bookmarks/bookmark_editor_view.h",
      "views/browser_dialogs_views_mac.cc",
      "views/chooser_content_view.cc",
      "views/chooser_content_view.h",
      "views/chrome_browser_main_extra_parts_views.cc",
      "views/chrome_browser_main_extra_parts_views.h",
      "views/chrome_constrained_window_views_client.cc",
      "views/chrome_constrained_window_views_client.h",
      "views/chrome_views_delegate.cc",
      "views/chrome_views_delegate.h",
      "views/collected_cookies_views.cc",
      "views/collected_cookies_views.h",
      "views/content_setting_bubble_contents.cc",
      "views/content_setting_bubble_contents.h",
      "views/cookie_info_view.cc",
      "views/cookie_info_view.h",
      "views/exclusive_access_bubble_views.cc",
      "views/exclusive_access_bubble_views.h",
      "views/exclusive_access_bubble_views_context.h",
      "views/extensions/chooser_dialog_view.cc",
      "views/extensions/chooser_dialog_view.h",
      "views/extensions/device_permissions_dialog_view.cc",
      "views/extensions/device_permissions_dialog_view.h",
      "views/extensions/extension_install_dialog_view.cc",
      "views/extensions/extension_keybinding_registry_views.cc",
      "views/extensions/extension_keybinding_registry_views.h",
      "views/frame/native_widget_mac_frameless_nswindow.h",
      "views/frame/native_widget_mac_frameless_nswindow.mm",
      "views/harmony/harmony_layout_delegate.cc",
      "views/harmony/harmony_layout_delegate.h",
      "views/harmony/layout_delegate.cc",
      "views/harmony/layout_delegate.h",
      "views/layout_utils.cc",
      "views/layout_utils.h",
      "views/location_bar/location_bar_bubble_delegate_view.cc",
      "views/location_bar/location_bar_bubble_delegate_view.h",
      "views/login_handler_views.cc",
      "views/login_view.cc",
      "views/login_view.h",
      "views/new_back_shortcut_bubble.cc",
      "views/new_back_shortcut_bubble.h",
      "views/subtle_notification_view.cc",
      "views/subtle_notification_view.h",
      "views/sync/bubble_sync_promo_view.cc",
      "views/sync/bubble_sync_promo_view.h",
      "views/task_manager_view.cc",
      "views/task_manager_view.h",
      "views/website_settings/chosen_object_row.cc",
      "views/website_settings/chosen_object_row.h",
      "views/website_settings/chosen_object_row_observer.h",
      "views/website_settings/non_accessible_image_view.cc",
      "views/website_settings/non_accessible_image_view.h",
      "views/website_settings/permission_prompt_impl.cc",
      "views/website_settings/permission_prompt_impl.h",
      "views/website_settings/permission_selector_row.cc",
      "views/website_settings/permission_selector_row.h",
      "views/website_settings/permission_selector_row_observer.h",
      "views/website_settings/website_settings_popup_view.cc",
      "views/website_settings/website_settings_popup_view.h",
    ]
    deps += [
      "//chrome/browser/ui/views",
      "//components/constrained_window",
      "//services/ui/public/cpp/input_devices",
    ]
    allow_circular_includes_from += [ "//chrome/browser/ui/views" ]

    if (enable_extensions) {
      deps += [ "//extensions/components/native_app_window" ]
    }

    if (is_chromeos) {
      sources += [
        "views/apps/app_info_dialog/arc_app_info_links_panel.cc",
        "views/apps/app_info_dialog/arc_app_info_links_panel.h",
      ]
    } else if (!is_mac || mac_views_browser) {
      sources += [
        "external_protocol_dialog_delegate.cc",
        "external_protocol_dialog_delegate.h",
        "views/external_protocol_dialog.cc",
        "views/external_protocol_dialog.h",
        "views/frame/opaque_browser_frame_view.cc",
        "views/frame/opaque_browser_frame_view.h",
        "views/frame/opaque_browser_frame_view_layout.cc",
        "views/frame/opaque_browser_frame_view_layout.h",
        "views/frame/opaque_browser_frame_view_layout_delegate.h",
        "views/frame/opaque_browser_frame_view_linux.cc",
        "views/frame/opaque_browser_frame_view_linux.h",
        "views/frame/opaque_browser_frame_view_platform_specific.cc",
        "views/frame/opaque_browser_frame_view_platform_specific.h",
        "views/profiles/profile_chooser_view.cc",
        "views/profiles/profile_chooser_view.h",
        "views/screen_capture_notification_ui_views.cc",
        "views/sync/one_click_signin_dialog_view.cc",
        "views/sync/one_click_signin_dialog_view.h",
        "views/sync/profile_signin_confirmation_dialog_views.cc",
        "views/sync/profile_signin_confirmation_dialog_views.h",
      ]
    }

    # These files do Gtk+-based theming, but Gtk+ is not available on
    # Ozone builds, or on common environments where Ozone will be used.
    #
    # TODO(tonikitoo): It seems sensible to make it possible to opt-in
    # the use of these files in case Gtk is available with its Wayland.
    if (use_aura && !use_ozone && is_desktop_linux) {
      sources += [
        "views/chrome_browser_main_extra_parts_views_linux.cc",
        "views/chrome_browser_main_extra_parts_views_linux.h",
      ]
    }
    if (enable_extensions && (!is_mac || mac_views_browser)) {
      sources += [
        "views/extensions/bookmark_app_confirmation_view.cc",
        "views/extensions/bookmark_app_confirmation_view.h",
        "views/extensions/browser_action_drag_data.cc",
        "views/extensions/browser_action_drag_data.h",
        "views/extensions/extension_action_platform_delegate_views.cc",
        "views/extensions/extension_action_platform_delegate_views.h",
        "views/extensions/extension_dialog.cc",
        "views/extensions/extension_dialog.h",
        "views/extensions/extension_dialog_observer.cc",
        "views/extensions/extension_dialog_observer.h",
        "views/extensions/extension_installed_bubble_view.cc",
        "views/extensions/extension_popup.cc",
        "views/extensions/extension_popup.h",
        "views/extensions/extension_uninstall_dialog_view.cc",
        "views/extensions/extension_view_views.cc",
        "views/extensions/extension_view_views.h",
        "views/extensions/media_galleries_dialog_views.cc",
        "views/extensions/media_galleries_dialog_views.h",
        "views/extensions/media_gallery_checkbox_view.cc",
        "views/extensions/media_gallery_checkbox_view.h",
      ]
      if (use_aura) {
        sources += [
          "views/extensions/extension_popup_aura.cc",
          "views/extensions/extension_popup_aura.h",
        ]
      }
    }
    if (!is_mac || mac_views_browser) {
      sources += [
        "javascript_dialogs/javascript_dialog.cc",

        # This test header is included because it contains forward declarations
        # needed for "friend" statements for use in tests.
        "translate/translate_bubble_test_utils.h",
        "views/accessibility/invert_bubble_view.cc",
        "views/accessibility/invert_bubble_view.h",
        "views/autofill/autofill_popup_base_view.cc",
        "views/autofill/autofill_popup_base_view.h",
        "views/autofill/autofill_popup_view_views.cc",
        "views/autofill/autofill_popup_view_views.h",
        "views/autofill/card_unmask_prompt_views_shim.cc",
        "views/autofill/password_generation_popup_view_views.cc",
        "views/autofill/password_generation_popup_view_views.h",
        "views/autofill/save_card_bubble_views.cc",
        "views/autofill/save_card_bubble_views.h",
        "views/autofill/save_card_icon_view.cc",
        "views/autofill/save_card_icon_view.h",
        "views/bookmarks/bookmark_bar_instructions_view.cc",
        "views/bookmarks/bookmark_bar_instructions_view.h",
        "views/bookmarks/bookmark_bar_view.cc",
        "views/bookmarks/bookmark_bar_view.h",
        "views/bookmarks/bookmark_bar_view_observer.h",
        "views/bookmarks/bookmark_context_menu.cc",
        "views/bookmarks/bookmark_context_menu.h",
        "views/bookmarks/bookmark_drag_drop_views.cc",
        "views/bookmarks/bookmark_menu_controller_observer.h",
        "views/bookmarks/bookmark_menu_controller_views.cc",
        "views/bookmarks/bookmark_menu_controller_views.h",
        "views/bookmarks/bookmark_menu_delegate.cc",
        "views/bookmarks/bookmark_menu_delegate.h",
        "views/browser_dialogs_views.cc",
        "views/certificate_selector.cc",
        "views/certificate_selector.h",
        "views/certificate_viewer_win.cc",
        "views/chrome_javascript_native_dialog_factory_views.cc",
        "views/chrome_views_delegate_chromeos.cc",
        "views/chrome_web_dialog_view.cc",
        "views/color_chooser_win.cc",
        "views/confirm_bubble_views.cc",
        "views/confirm_bubble_views.h",
        "views/conflicting_module_view_win.cc",
        "views/conflicting_module_view_win.h",
        "views/constrained_web_dialog_delegate_views.cc",
        "views/create_application_shortcut_view.cc",
        "views/create_application_shortcut_view.h",
        "views/download/download_danger_prompt_views.cc",
        "views/download/download_feedback_dialog_view.cc",
        "views/download/download_feedback_dialog_view.h",
        "views/download/download_in_progress_dialog_view.cc",
        "views/download/download_in_progress_dialog_view.h",
        "views/download/download_item_view.cc",
        "views/download/download_item_view.h",
        "views/download/download_shelf_context_menu_view.cc",
        "views/download/download_shelf_context_menu_view.h",
        "views/download/download_shelf_view.cc",
        "views/download/download_shelf_view.h",
        "views/download/download_started_animation_views.cc",
        "views/dropdown_bar_host.cc",
        "views/dropdown_bar_host.h",
        "views/dropdown_bar_host_delegate.h",
        "views/elevation_icon_setter.cc",
        "views/elevation_icon_setter.h",
        "views/find_bar_host.cc",
        "views/find_bar_host.h",
        "views/find_bar_view.cc",
        "views/find_bar_view.h",
        "views/first_run_bubble.cc",
        "views/first_run_bubble.h",
        "views/frame/browser_command_handler_linux.cc",
        "views/frame/browser_command_handler_linux.h",
        "views/frame/browser_frame.cc",
        "views/frame/browser_frame.h",
        "views/frame/browser_non_client_frame_view.cc",
        "views/frame/browser_non_client_frame_view.h",
        "views/frame/browser_root_view.cc",
        "views/frame/browser_root_view.h",
        "views/frame/browser_view.cc",
        "views/frame/browser_view.h",
        "views/frame/browser_view_layout.cc",
        "views/frame/browser_view_layout.h",
        "views/frame/browser_view_layout_delegate.h",
        "views/frame/browser_window_factory.cc",
        "views/frame/browser_window_property_manager_win.cc",
        "views/frame/browser_window_property_manager_win.h",
        "views/frame/contents_layout_manager.cc",
        "views/frame/contents_layout_manager.h",
        "views/frame/contents_web_view.cc",
        "views/frame/contents_web_view.h",
        "views/frame/immersive_mode_controller.cc",
        "views/frame/immersive_mode_controller.h",
        "views/frame/immersive_mode_controller_factory_views.cc",
        "views/frame/immersive_mode_controller_stub.cc",
        "views/frame/immersive_mode_controller_stub.h",
        "views/frame/minimize_button_metrics_win.cc",
        "views/frame/minimize_button_metrics_win.h",
        "views/frame/native_browser_frame.h",
        "views/frame/native_browser_frame_factory.cc",
        "views/frame/native_browser_frame_factory.h",
        "views/frame/native_browser_frame_factory_chromeos.cc",
        "views/frame/system_menu_insertion_delegate_win.cc",
        "views/frame/system_menu_insertion_delegate_win.h",
        "views/frame/system_menu_model_builder.cc",
        "views/frame/system_menu_model_builder.h",
        "views/frame/system_menu_model_delegate.cc",
        "views/frame/system_menu_model_delegate.h",
        "views/frame/taskbar_decorator_win.cc",
        "views/frame/taskbar_decorator_win.h",
        "views/frame/top_container_view.cc",
        "views/frame/top_container_view.h",
        "views/frame/web_contents_close_handler.cc",
        "views/frame/web_contents_close_handler.h",
        "views/frame/web_contents_close_handler_delegate.h",
        "views/global_error_bubble_view.cc",
        "views/global_error_bubble_view.h",
        "views/hung_renderer_view.cc",
        "views/hung_renderer_view.h",
        "views/ime/ime_warning_bubble_view.cc",
        "views/ime/ime_warning_bubble_view.h",
        "views/importer/import_lock_dialog_view.cc",
        "views/importer/import_lock_dialog_view.h",
        "views/infobars/alternate_nav_infobar_view.cc",
        "views/infobars/alternate_nav_infobar_view.h",
        "views/infobars/confirm_infobar.cc",
        "views/infobars/confirm_infobar.h",
        "views/infobars/infobar_background.cc",
        "views/infobars/infobar_background.h",
        "views/infobars/infobar_container_view.cc",
        "views/infobars/infobar_container_view.h",
        "views/infobars/infobar_view.cc",
        "views/infobars/infobar_view.h",
        "views/load_complete_listener.cc",
        "views/load_complete_listener.h",
        "views/location_bar/background_with_1_px_border.cc",
        "views/location_bar/background_with_1_px_border.h",
        "views/location_bar/bubble_icon_view.cc",
        "views/location_bar/bubble_icon_view.h",
        "views/location_bar/content_setting_image_view.cc",
        "views/location_bar/content_setting_image_view.h",
        "views/location_bar/icon_label_bubble_view.cc",
        "views/location_bar/icon_label_bubble_view.h",
        "views/location_bar/keyword_hint_view.cc",
        "views/location_bar/keyword_hint_view.h",
        "views/location_bar/location_bar_decoration_view.cc",
        "views/location_bar/location_bar_decoration_view.h",
        "views/location_bar/location_bar_layout.cc",
        "views/location_bar/location_bar_layout.h",
        "views/location_bar/location_bar_view.cc",
        "views/location_bar/location_bar_view.h",
        "views/location_bar/location_icon_view.cc",
        "views/location_bar/location_icon_view.h",
        "views/location_bar/open_pdf_in_reader_view.cc",
        "views/location_bar/open_pdf_in_reader_view.h",
        "views/location_bar/page_action_image_view.cc",
        "views/location_bar/page_action_image_view.h",
        "views/location_bar/page_action_with_badge_view.cc",
        "views/location_bar/page_action_with_badge_view.h",
        "views/location_bar/selected_keyword_view.cc",
        "views/location_bar/selected_keyword_view.h",
        "views/location_bar/star_view.cc",
        "views/location_bar/star_view.h",
        "views/location_bar/zoom_bubble_view.cc",
        "views/location_bar/zoom_bubble_view.h",
        "views/location_bar/zoom_view.cc",
        "views/location_bar/zoom_view.h",
        "views/omnibox/omnibox_popup_contents_view.cc",
        "views/omnibox/omnibox_popup_contents_view.h",
        "views/omnibox/omnibox_result_view.cc",
        "views/omnibox/omnibox_result_view.h",
        "views/omnibox/omnibox_view_views.cc",
        "views/omnibox/omnibox_view_views.h",
        "views/open_pdf_in_reader_bubble_view.cc",
        "views/open_pdf_in_reader_bubble_view.h",
        "views/outdated_upgrade_bubble_view.cc",
        "views/outdated_upgrade_bubble_view.h",
        "views/passwords/account_chooser_dialog_view.cc",
        "views/passwords/account_chooser_dialog_view.h",
        "views/passwords/auto_signin_first_run_dialog_view.cc",
        "views/passwords/auto_signin_first_run_dialog_view.h",
        "views/passwords/credentials_item_view.cc",
        "views/passwords/credentials_item_view.h",
        "views/passwords/credentials_selection_view.cc",
        "views/passwords/credentials_selection_view.h",
        "views/passwords/manage_password_items_view.cc",
        "views/passwords/manage_password_items_view.h",
        "views/passwords/manage_passwords_bubble_view.cc",
        "views/passwords/manage_passwords_bubble_view.h",
        "views/passwords/manage_passwords_icon_views.cc",
        "views/passwords/manage_passwords_icon_views.h",
        "views/process_singleton_dialog_linux.cc",
        "views/profiles/profile_indicator_icon.cc",
        "views/profiles/profile_indicator_icon.h",
        "views/profiles/signin_view_controller_delegate_views.cc",
        "views/profiles/signin_view_controller_delegate_views.h",
        "views/profiles/user_manager_view.cc",
        "views/profiles/user_manager_view.h",
        "views/proximity_auth/proximity_auth_error_bubble_view.cc",
        "views/proximity_auth/proximity_auth_error_bubble_view.h",
        "views/session_crashed_bubble_view.cc",
        "views/session_crashed_bubble_view.h",
        "views/simple_message_box_views.cc",
        "views/ssl_client_certificate_selector.cc",
        "views/ssl_client_certificate_selector.h",
        "views/status_bubble_views.cc",
        "views/status_bubble_views.h",
        "views/status_icons/status_icon_win.cc",
        "views/status_icons/status_icon_win.h",
        "views/status_icons/status_tray_linux.cc",
        "views/status_icons/status_tray_linux.h",
        "views/status_icons/status_tray_state_changer_win.cc",
        "views/status_icons/status_tray_state_changer_win.h",
        "views/status_icons/status_tray_win.cc",
        "views/status_icons/status_tray_win.h",
        "views/tab_dialogs_views.cc",
        "views/tab_dialogs_views.h",
        "views/tab_icon_view.cc",
        "views/tab_icon_view.h",
        "views/tab_modal_confirm_dialog_views.cc",
        "views/tab_modal_confirm_dialog_views.h",
        "views/tabs/alert_indicator_button.cc",
        "views/tabs/alert_indicator_button.h",
        "views/tabs/browser_tab_strip_controller.cc",
        "views/tabs/browser_tab_strip_controller.h",
        "views/tabs/stacked_tab_strip_layout.cc",
        "views/tabs/stacked_tab_strip_layout.h",
        "views/tabs/tab.cc",
        "views/tabs/tab.h",
        "views/tabs/tab_controller.h",
        "views/tabs/tab_drag_controller.cc",
        "views/tabs/tab_drag_controller.h",
        "views/tabs/tab_strip.cc",
        "views/tabs/tab_strip.h",
        "views/tabs/tab_strip_controller.h",
        "views/tabs/tab_strip_layout.cc",
        "views/tabs/tab_strip_layout.h",
        "views/tabs/window_finder.cc",
        "views/tabs/window_finder.h",
        "views/tabs/window_finder_chromeos.cc",
        "views/tabs/window_finder_win.cc",
        "views/theme_copying_widget.cc",
        "views/theme_copying_widget.h",
        "views/toolbar/app_menu.cc",
        "views/toolbar/app_menu.h",
        "views/toolbar/app_menu_button.cc",
        "views/toolbar/app_menu_button.h",
        "views/toolbar/app_menu_observer.h",
        "views/toolbar/back_button.cc",
        "views/toolbar/back_button.h",
        "views/toolbar/browser_actions_container.cc",
        "views/toolbar/browser_actions_container.h",
        "views/toolbar/extension_toolbar_menu_view.cc",
        "views/toolbar/extension_toolbar_menu_view.h",
        "views/toolbar/home_button.cc",
        "views/toolbar/home_button.h",
        "views/toolbar/reload_button.cc",
        "views/toolbar/reload_button.h",
        "views/toolbar/toolbar_action_view.cc",
        "views/toolbar/toolbar_action_view.h",
        "views/toolbar/toolbar_action_view_delegate_views.h",
        "views/toolbar/toolbar_actions_bar_bubble_views.cc",
        "views/toolbar/toolbar_actions_bar_bubble_views.h",
        "views/toolbar/toolbar_button.cc",
        "views/toolbar/toolbar_button.h",
        "views/toolbar/toolbar_view.cc",
        "views/toolbar/toolbar_view.h",
        "views/touch_uma/touch_uma.h",
        "views/translate/translate_bubble_view.cc",
        "views/translate/translate_bubble_view.h",
        "views/translate/translate_icon_view.cc",
        "views/translate/translate_icon_view.h",
        "views/update_recommended_message_box.cc",
        "views/update_recommended_message_box.h",
        "views/validation_message_bubble_view.cc",
        "views/validation_message_bubble_view.h",
        "views/website_settings/chooser_bubble_ui_view.cc",
        "views/website_settings/chooser_bubble_ui_view.h",
        "views/website_settings/permission_prompt_impl_views.cc",
      ]
      if (use_aura) {
        deps += [
          "//services/ui/public/cpp",
          "//services/ui/public/interfaces",
        ]
      }

      # TODO(ellyjones): Mus is not supported on Mac (there is no ui::Window
      # apart from aura::Window, which is also not supported).
      if (!is_mac) {
        sources += [
          "views/tabs/window_finder_mus.cc",
          "views/tabs/window_finder_mus.h",
        ]

        deps += [ "//ui/views/mus" ]
      }
    }
    if (use_ash) {
      sources += [
        "views/frame/browser_frame_ash.cc",
        "views/frame/browser_frame_ash.h",
        "views/frame/browser_header_painter_ash.cc",
        "views/frame/browser_header_painter_ash.h",
        "views/frame/browser_non_client_frame_view_ash.cc",
        "views/frame/browser_non_client_frame_view_ash.h",
        "views/frame/immersive_context_mus.cc",
        "views/frame/immersive_context_mus.h",
        "views/frame/immersive_handler_factory_mus.cc",
        "views/frame/immersive_handler_factory_mus.h",
        "views/frame/immersive_mode_controller_ash.cc",
        "views/frame/immersive_mode_controller_ash.h",
        "views/frame/web_app_left_header_view_ash.cc",
        "views/frame/web_app_left_header_view_ash.h",
        "views/tabs/window_finder_ash.cc",
      ]
    }
  }
  if (use_gio) {
    deps += [ "//build/linux/libgio" ]
  }
  if (use_aura && !use_ozone && is_desktop_linux && use_gtk) {
    # These are the only components that can interact with gtk.
    if (use_gtk3) {
      deps += [ "//chrome/browser/ui/libgtkui:libgtk3ui" ]
    } else {
      deps += [ "//chrome/browser/ui/libgtkui:libgtk2ui" ]
    }
  }
  if (is_win || is_mac || is_desktop_linux) {
    sources += [
      "avatar_button_error_controller.cc",
      "avatar_button_error_controller.h",
      "avatar_button_error_controller_delegate.h",
      "startup/default_browser_infobar_delegate.cc",
      "startup/default_browser_infobar_delegate.h",
      "startup/default_browser_prompt.cc",
      "startup/default_browser_prompt.h",
      "startup/default_browser_prompt_win.cc",
      "sync/one_click_signin_links_delegate.h",
      "sync/one_click_signin_links_delegate_impl.cc",
      "sync/one_click_signin_links_delegate_impl.h",
      "sync/one_click_signin_sync_observer.cc",
      "sync/one_click_signin_sync_observer.h",
      "sync/one_click_signin_sync_starter.cc",
      "sync/one_click_signin_sync_starter.h",
      "views/frame/avatar_button_manager.cc",
      "views/frame/avatar_button_manager.h",
      "views/profiles/avatar_button_delegate.h",
      "views/profiles/avatar_button_style.h",
      "views/profiles/new_avatar_button.cc",
      "views/profiles/new_avatar_button.h",
      "webui/app_launcher_page_ui.cc",
      "webui/app_launcher_page_ui.h",
      "webui/settings/settings_default_browser_handler.cc",
      "webui/settings/settings_default_browser_handler.h",
      "webui/settings/system_handler.cc",
      "webui/settings/system_handler.h",
      "webui/settings_utils_linux.cc",
      "webui/settings_utils_mac.mm",
      "webui/settings_utils_win.cc",
      "webui/signin/inline_login_handler.cc",
      "webui/signin/inline_login_handler.h",
      "webui/signin/inline_login_handler_impl.cc",
      "webui/signin/inline_login_handler_impl.h",
      "webui/signin/inline_login_ui.cc",
      "webui/signin/inline_login_ui.h",
      "webui/signin/md_user_manager_ui.cc",
      "webui/signin/md_user_manager_ui.h",
      "webui/signin/signin_create_profile_handler.cc",
      "webui/signin/signin_create_profile_handler.h",
      "webui/signin/signin_error_handler.cc",
      "webui/signin/signin_error_handler.h",
      "webui/signin/signin_error_ui.cc",
      "webui/signin/signin_error_ui.h",
      "webui/signin/signin_supervised_user_import_handler.cc",
      "webui/signin/signin_supervised_user_import_handler.h",
      "webui/signin/sync_confirmation_handler.cc",
      "webui/signin/sync_confirmation_handler.h",
      "webui/signin/sync_confirmation_ui.cc",
      "webui/signin/sync_confirmation_ui.h",
      "webui/signin/user_manager_screen_handler.cc",
      "webui/signin/user_manager_screen_handler.h",
      "webui/welcome_handler.cc",
      "webui/welcome_handler.h",
      "webui/welcome_ui.cc",
      "webui/welcome_ui.h",
    ]
    if (is_mac && !mac_views_browser) {
      sources -= [
        # This is not explicitly excluded in GYP, but I think the static
        # library linking rules means it's never referenced when compiling in
        # non-Views mode on Mac. It appears not to link in that case.
        "views/frame/avatar_button_manager.cc",
        "views/frame/avatar_button_manager.h",
        "views/profiles/new_avatar_button.cc",
        "views/profiles/new_avatar_button.h",
      ]
    }
  }
  if (use_aura) {
    sources += [
      "aura/accessibility/automation_manager_aura.cc",
      "aura/accessibility/automation_manager_aura.h",
      "aura/accessibility/ax_root_obj_wrapper.cc",
      "aura/accessibility/ax_root_obj_wrapper.h",
      "aura/accessibility/ax_tree_source_aura.cc",
      "aura/accessibility/ax_tree_source_aura.h",
      "aura/native_window_tracker_aura.cc",
      "aura/native_window_tracker_aura.h",
      "aura/tab_contents/web_drag_bookmark_handler_aura.cc",
      "aura/tab_contents/web_drag_bookmark_handler_aura.h",
      "ime/ime_window.cc",
      "ime/ime_window.h",
      "views/accelerator_utils_aura.cc",
      "views/apps/app_window_desktop_native_widget_aura_win.cc",
      "views/apps/app_window_desktop_native_widget_aura_win.h",
      "views/apps/app_window_desktop_window_tree_host_win.cc",
      "views/apps/app_window_desktop_window_tree_host_win.h",
      "views/apps/app_window_easy_resize_window_targeter.cc",
      "views/apps/app_window_easy_resize_window_targeter.h",
      "views/apps/chrome_app_window_client_views_chromeos.cc",
      "views/apps/chrome_app_window_client_views_win.cc",
      "views/apps/chrome_native_app_window_views_aura.cc",
      "views/apps/chrome_native_app_window_views_aura.h",
      "views/apps/chrome_native_app_window_views_win.cc",
      "views/apps/chrome_native_app_window_views_win.h",
      "views/apps/glass_app_window_frame_view_win.cc",
      "views/apps/glass_app_window_frame_view_win.h",
      "views/apps/shaped_app_window_targeter.cc",
      "views/apps/shaped_app_window_targeter.h",
      "views/color_chooser_aura.cc",
      "views/color_chooser_aura.h",
      "views/crypto_module_password_dialog_view.cc",
      "views/crypto_module_password_dialog_view.h",
      "views/desktop_capture/desktop_media_list_view.cc",
      "views/desktop_capture/desktop_media_list_view.h",
      "views/desktop_capture/desktop_media_picker_views.cc",
      "views/desktop_capture/desktop_media_picker_views.h",
      "views/desktop_capture/desktop_media_source_view.cc",
      "views/desktop_capture/desktop_media_source_view.h",
      "views/desktop_media_picker_views_deprecated.cc",
      "views/desktop_media_picker_views_deprecated.h",
      "views/dropdown_bar_host_aura.cc",
      "views/frame/browser_non_client_frame_view_factory_views.cc",
      "views/ime/ime_window_frame_view.cc",
      "views/ime/ime_window_frame_view.h",
      "views/ime/ime_window_view.cc",
      "views/ime/ime_window_view.h",
      "views/renderer_context_menu/render_view_context_menu_views.cc",
      "views/renderer_context_menu/render_view_context_menu_views.h",
      "views/sad_tab_view.cc",
      "views/sad_tab_view.h",
      "views/tab_contents/chrome_web_contents_view_delegate_views.cc",
      "views/tab_contents/chrome_web_contents_view_delegate_views.h",
      "window_sizer/window_sizer_aura.cc",
    ]
    deps += [
      # aura uses some of ash resources.
      "//ash/resources",
      "//ui/aura",
      "//ui/keyboard",
      "//ui/keyboard:keyboard_with_content",
      "//ui/keyboard:resources",
      "//ui/wm",
    ]
    if (!is_chromeos) {
      sources += [
        "views/frame/desktop_browser_frame_aura.cc",
        "views/frame/desktop_browser_frame_aura.h",
        "views/message_center/message_center_frame_view.cc",
        "views/message_center/message_center_frame_view.h",
        "views/message_center/web_notification_tray.cc",
        "views/message_center/web_notification_tray.h",
      ]
    }
  }
  if (ui_compositor_image_transport) {
    deps += [ "//ui/gl" ]
  }
  if (use_nss_certs) {
    sources += [
      "crypto_module_delegate_nss.cc",
      "crypto_module_delegate_nss.h",
      "crypto_module_password_dialog_nss.cc",
      "crypto_module_password_dialog_nss.h",
      "webui/options/certificate_manager_handler.cc",
      "webui/options/certificate_manager_handler.h",
      "webui/settings/certificates_handler.cc",
      "webui/settings/certificates_handler.h",
    ]
  }
  if (is_mac || is_win) {
    sources += [
      "webui/settings/native_certificates_handler.cc",
      "webui/settings/native_certificates_handler.h",
    ]
  }
  if (enable_themes) {
    sources += [
      "webui/theme_source.cc",
      "webui/theme_source.h",
    ]
    deps += [ "//chrome/browser:theme_properties" ]
  }
  if (enable_print_preview) {
    sources += [
      "webui/print_preview/extension_printer_handler.cc",
      "webui/print_preview/extension_printer_handler.h",
      "webui/print_preview/print_preview_handler.cc",
      "webui/print_preview/print_preview_handler.h",
      "webui/print_preview/print_preview_ui.cc",
      "webui/print_preview/print_preview_ui.h",
      "webui/print_preview/printer_backend_proxy.h",
      "webui/print_preview/printer_capabilities.cc",
      "webui/print_preview/printer_capabilities.h",
      "webui/print_preview/printer_handler.cc",
      "webui/print_preview/printer_handler.h",
      "webui/print_preview/sticky_settings.cc",
      "webui/print_preview/sticky_settings.h",
    ]

    if (is_chromeos) {
      sources += [ "webui/print_preview/printer_backend_proxy_chromeos.cc" ]
    } else {
      sources += [ "webui/print_preview/printer_backend_proxy.cc" ]
    }
  }

  if (is_android) {
    deps += [
      "//components/navigation_interception",
      "//crypto:platform",
      "//device/usb/mojo",
      "//device/usb/public/interfaces",
      "//ui/android",
    ]

    if (android_java_ui) {
      sources += [
        "android/autofill/autofill_keyboard_accessory_view.cc",
        "android/autofill/autofill_keyboard_accessory_view.h",
        "android/autofill/autofill_logger_android.cc",
        "android/autofill/autofill_logger_android.h",
        "android/autofill/autofill_popup_view_android.cc",
        "android/autofill/autofill_popup_view_android.h",
        "android/autofill/card_unmask_prompt_view_android.cc",
        "android/autofill/card_unmask_prompt_view_android.h",
        "android/autofill/credit_card_scanner_view_android.cc",
        "android/autofill/credit_card_scanner_view_android.h",
        "android/autofill/password_generation_popup_view_android.cc",
        "android/autofill/password_generation_popup_view_android.h",
        "android/bluetooth_chooser_android.cc",
        "android/bluetooth_chooser_android.h",
        "android/chrome_http_auth_handler.cc",
        "android/chrome_http_auth_handler.h",
        "android/color_chooser_dialog_android.cc",
        "android/content_settings/popup_blocked_infobar_delegate.cc",
        "android/content_settings/popup_blocked_infobar_delegate.h",
        "android/content_settings/subresource_filter_infobar_delegate.cc",
        "android/content_settings/subresource_filter_infobar_delegate.h",
        "android/context_menu_helper.cc",
        "android/context_menu_helper.h",
        "android/infobars/app_banner_infobar_android.cc",
        "android/infobars/app_banner_infobar_android.h",
        "android/infobars/autofill_credit_card_filling_infobar.cc",
        "android/infobars/autofill_credit_card_filling_infobar.h",
        "android/infobars/autofill_save_card_infobar.cc",
        "android/infobars/autofill_save_card_infobar.h",
        "android/infobars/confirm_infobar.cc",
        "android/infobars/confirm_infobar.h",
        "android/infobars/data_reduction_promo_infobar.cc",
        "android/infobars/data_reduction_promo_infobar.h",
        "android/infobars/duplicate_download_infobar.cc",
        "android/infobars/duplicate_download_infobar.h",
        "android/infobars/generated_password_saved_infobar.cc",
        "android/infobars/generated_password_saved_infobar.h",
        "android/infobars/grouped_permission_infobar.cc",
        "android/infobars/grouped_permission_infobar.h",
        "android/infobars/infobar_android.cc",
        "android/infobars/infobar_android.h",
        "android/infobars/infobar_container_android.cc",
        "android/infobars/infobar_container_android.h",
        "android/infobars/instant_apps_infobar.cc",
        "android/infobars/instant_apps_infobar.h",
        "android/infobars/permission_infobar.cc",
        "android/infobars/permission_infobar.h",
        "android/infobars/search_geolocation_disclosure_infobar.cc",
        "android/infobars/search_geolocation_disclosure_infobar.h",
        "android/infobars/simple_confirm_infobar_builder.cc",
        "android/infobars/simple_confirm_infobar_builder.h",
        "android/infobars/subresource_filter_infobar.cc",
        "android/infobars/subresource_filter_infobar.h",
        "android/infobars/translate_infobar.cc",
        "android/infobars/translate_infobar.h",
        "android/infobars/update_password_infobar.cc",
        "android/infobars/update_password_infobar.h",
        "android/javascript_app_modal_dialog_android.cc",
        "android/login_handler_android.cc",
        "android/omnibox/omnibox_url_emphasizer.cc",
        "android/omnibox/omnibox_url_emphasizer.h",
        "android/omnibox/omnibox_view_util.cc",
        "android/omnibox/omnibox_view_util.h",
        "android/page_info/certificate_viewer_android.cc",
        "android/page_info/certificate_viewer_android.h",
        "android/page_info/connection_info_popup_android.cc",
        "android/page_info/connection_info_popup_android.h",
        "android/page_info/website_settings_popup_android.cc",
        "android/page_info/website_settings_popup_android.h",
        "android/simple_message_box_android.cc",
        "android/snackbars/auto_signin_prompt_controller.cc",
        "android/snackbars/auto_signin_prompt_controller.h",
        "android/ssl_client_certificate_request.cc",
        "android/ssl_client_certificate_request.h",
        "android/tab_contents/chrome_web_contents_view_delegate_android.cc",
        "android/tab_contents/chrome_web_contents_view_delegate_android.h",
        "android/tab_model/android_live_tab_context.cc",
        "android/tab_model/android_live_tab_context.h",
        "android/tab_model/single_tab_model.cc",
        "android/tab_model/single_tab_model.h",
        "android/tab_model/tab_model.cc",
        "android/tab_model/tab_model.h",
        "android/tab_model/tab_model_jni_bridge.cc",
        "android/tab_model/tab_model_jni_bridge.h",
        "android/tab_model/tab_model_list.cc",
        "android/tab_model/tab_model_list.h",
        "android/toolbar/toolbar_model_android.cc",
        "android/toolbar/toolbar_model_android.h",
        "android/usb_chooser_dialog_android.cc",
        "android/usb_chooser_dialog_android.h",
        "android/view_android_helper.cc",
        "android/view_android_helper.h",
        "browser_otr_state_android.cc",
        "screen_capture_notification_ui_stub.cc",
        "webui/offline/offline_internals_ui.cc",
        "webui/offline/offline_internals_ui.h",
        "webui/offline/offline_internals_ui_message_handler.cc",
        "webui/offline/offline_internals_ui_message_handler.h",
        "webui/popular_sites_internals_ui.cc",
        "webui/popular_sites_internals_ui.h",
        "webui/snippets_internals_message_handler.cc",
        "webui/snippets_internals_message_handler.h",
        "webui/snippets_internals_ui.cc",
        "webui/snippets_internals_ui.h",
      ]
      if (enable_vr_shell || enable_webvr) {
        if (enable_vr_shell) {
          defines += [ "ENABLE_VR_SHELL" ]
        }
        sources += [
          "webui/vr_shell/vr_shell_ui_message_handler.cc",
          "webui/vr_shell/vr_shell_ui_message_handler.h",
          "webui/vr_shell/vr_shell_ui_ui.cc",
          "webui/vr_shell/vr_shell_ui_ui.h",
        ]
        configs += [ "//third_party/gvr-android-sdk:libgvr_config" ]
        deps += [ "//chrome/browser/android/vr_shell:vr_common" ]
      }
      if (enable_vr_shell_ui_dev) {
        assert(enable_vr_shell)
        defines += [ "ENABLE_VR_SHELL_UI_DEV" ]
      }
      deps += [
        "//chrome/browser:jni_headers",
        "//components/web_contents_delegate_android",
      ]
      deps -= [ "//ui/events" ]
    }
  } else {
    sources += [ "browser_window.h" ]
  }

  if (is_mac) {
    sources += [
      "certificate_viewer_mac.h",
      "certificate_viewer_mac.mm",
      "cocoa/accelerator_utils_cocoa.mm",
      "cocoa/accelerators_cocoa.h",
      "cocoa/accelerators_cocoa.mm",
      "cocoa/apps/app_shim_menu_controller_mac.h",
      "cocoa/apps/app_shim_menu_controller_mac.mm",
      "cocoa/apps/quit_with_apps_controller_mac.cc",
      "cocoa/apps/quit_with_apps_controller_mac.h",
      "cocoa/apps/titlebar_background_view.h",
      "cocoa/apps/titlebar_background_view.mm",
      "cocoa/bookmarks/bookmark_menu_bridge.h",
      "cocoa/bookmarks/bookmark_menu_bridge.mm",
      "cocoa/bookmarks/bookmark_menu_cocoa_controller.h",
      "cocoa/bookmarks/bookmark_menu_cocoa_controller.mm",
      "cocoa/browser_window_command_handler.h",
      "cocoa/browser_window_command_handler.mm",
      "cocoa/chrome_command_dispatcher_delegate.h",
      "cocoa/chrome_command_dispatcher_delegate.mm",
      "cocoa/chrome_style.cc",
      "cocoa/chrome_style.h",
      "cocoa/color_chooser_mac.mm",
      "cocoa/confirm_quit.h",
      "cocoa/confirm_quit_panel_controller.h",
      "cocoa/confirm_quit_panel_controller.mm",
      "cocoa/dock_icon.h",
      "cocoa/dock_icon.mm",
      "cocoa/download/download_item_drag_mac.mm",
      "cocoa/download/download_util_mac.h",
      "cocoa/download/download_util_mac.mm",
      "cocoa/first_run_dialog.h",
      "cocoa/first_run_dialog.mm",
      "cocoa/handoff_active_url_observer.cc",
      "cocoa/handoff_active_url_observer.h",
      "cocoa/handoff_active_url_observer_bridge.h",
      "cocoa/handoff_active_url_observer_bridge.mm",
      "cocoa/handoff_active_url_observer_delegate.h",
      "cocoa/history_menu_bridge.h",
      "cocoa/history_menu_bridge.mm",
      "cocoa/history_menu_cocoa_controller.h",
      "cocoa/history_menu_cocoa_controller.mm",
      "cocoa/history_overlay_controller.h",
      "cocoa/history_overlay_controller.mm",
      "cocoa/key_equivalent_constants.h",
      "cocoa/key_equivalent_constants.mm",
      "cocoa/keystone_infobar_delegate.h",
      "cocoa/keystone_infobar_delegate.mm",
      "cocoa/l10n_util.h",
      "cocoa/l10n_util.mm",
      "cocoa/last_active_browser_cocoa.cc",
      "cocoa/last_active_browser_cocoa.h",
      "cocoa/media_picker/desktop_media_picker_bridge.h",
      "cocoa/media_picker/desktop_media_picker_bridge.mm",
      "cocoa/media_picker/desktop_media_picker_cocoa.h",
      "cocoa/media_picker/desktop_media_picker_cocoa.mm",
      "cocoa/media_picker/desktop_media_picker_controller.h",
      "cocoa/media_picker/desktop_media_picker_controller.mm",
      "cocoa/media_picker/desktop_media_picker_controller_deprecated.h",
      "cocoa/media_picker/desktop_media_picker_controller_deprecated.mm",
      "cocoa/media_picker/desktop_media_picker_item.h",
      "cocoa/media_picker/desktop_media_picker_item.mm",
      "cocoa/native_window_tracker_cocoa.h",
      "cocoa/native_window_tracker_cocoa.mm",
      "cocoa/notifications/message_center_tray_bridge.h",
      "cocoa/notifications/message_center_tray_bridge.mm",
      "cocoa/nsmenuitem_additions.h",
      "cocoa/nsmenuitem_additions.mm",
      "cocoa/profiles/profile_menu_controller.h",
      "cocoa/profiles/profile_menu_controller.mm",
      "cocoa/renderer_context_menu/render_view_context_menu_mac.h",
      "cocoa/renderer_context_menu/render_view_context_menu_mac.mm",
      "cocoa/status_icons/status_icon_mac.h",
      "cocoa/status_icons/status_icon_mac.mm",
      "cocoa/status_icons/status_tray_mac.h",
      "cocoa/status_icons/status_tray_mac.mm",
      "cocoa/tab_contents/chrome_web_contents_view_delegate_mac.h",
      "cocoa/tab_contents/chrome_web_contents_view_delegate_mac.mm",
      "cocoa/tab_contents/sad_tab_mac.mm",
      "cocoa/tab_contents/sad_tab_view_cocoa.h",
      "cocoa/tab_contents/sad_tab_view_cocoa.mm",
      "cocoa/tab_contents/web_drag_bookmark_handler_mac.h",
      "cocoa/tab_contents/web_drag_bookmark_handler_mac.mm",
      "cocoa/ui_localizer.h",
      "cocoa/ui_localizer.mm",
      "cocoa/web_contents_modal_dialog_host_cocoa.h",
      "cocoa/web_contents_modal_dialog_host_cocoa.mm",

      # TODO(estade): this class should be folded into
      # manage_passwords_decoration.mm
      "passwords/manage_passwords_icon.cc",
      "passwords/manage_passwords_icon.h",
      "web_contents_sizer.mm",
      "webui/cast/cast_ui.cc",
      "webui/cast/cast_ui.h",
    ]
    deps += [
      "//chrome/app/nibs:localizer_table",
      "//chrome/browser/apps/app_shim",
      "//third_party/apple_sample_code",
      "//third_party/google_toolbox_for_mac",
      "//third_party/molokocacao",
      "//third_party/mozilla",
      "//ui/accelerated_widget_mac:accelerated_widget_mac",
    ]
    if (mac_views_browser) {
      # MacViews sources that we still want to keep behind a compile-time flag.
      # TODO(jackhou): Move items to general views sources out of here.
      sources += [
        "views/apps/chrome_app_window_client_views_mac.mm",
        "views/certificate_viewer_mac_views.mm",
        "views/dropdown_bar_host_mac.mm",
        "views/frame/browser_frame_mac.h",
        "views/frame/browser_frame_mac.mm",
        "views/frame/browser_non_client_frame_view_factory_mac.mm",
        "views/frame/browser_non_client_frame_view_mac.h",
        "views/frame/browser_non_client_frame_view_mac.mm",
        "views/frame/native_browser_frame_factory_mac.mm",
        "views/infobars/legacy_infobars_mac.cc",
        "views/tabs/window_finder_mac.mm",
      ]
      deps += [ "//extensions/components/native_app_window" ]
    } else {
      sources += [
        "cocoa/animatable_image.h",
        "cocoa/animatable_image.mm",
        "cocoa/animatable_view.h",
        "cocoa/animatable_view.mm",
        "cocoa/app_menu/app_menu_button_cell.h",
        "cocoa/app_menu/app_menu_button_cell.mm",
        "cocoa/app_menu/app_menu_controller.h",
        "cocoa/app_menu/app_menu_controller.mm",
        "cocoa/app_menu/menu_tracked_button.h",
        "cocoa/app_menu/menu_tracked_button.mm",
        "cocoa/app_menu/menu_tracked_root_view.h",
        "cocoa/app_menu/menu_tracked_root_view.mm",
        "cocoa/app_menu/recent_tabs_menu_model_delegate.h",
        "cocoa/app_menu/recent_tabs_menu_model_delegate.mm",
        "cocoa/applescript/apple_event_util.h",
        "cocoa/applescript/apple_event_util.mm",
        "cocoa/applescript/bookmark_folder_applescript.h",
        "cocoa/applescript/bookmark_folder_applescript.mm",
        "cocoa/applescript/bookmark_item_applescript.h",
        "cocoa/applescript/bookmark_item_applescript.mm",
        "cocoa/applescript/bookmark_node_applescript.h",
        "cocoa/applescript/bookmark_node_applescript.mm",
        "cocoa/applescript/browsercrapplication+applescript.h",
        "cocoa/applescript/browsercrapplication+applescript.mm",
        "cocoa/applescript/constants_applescript.h",
        "cocoa/applescript/constants_applescript.mm",
        "cocoa/applescript/element_applescript.h",
        "cocoa/applescript/element_applescript.mm",
        "cocoa/applescript/error_applescript.h",
        "cocoa/applescript/error_applescript.mm",
        "cocoa/applescript/metrics_applescript.h",
        "cocoa/applescript/metrics_applescript.mm",
        "cocoa/applescript/tab_applescript.h",
        "cocoa/applescript/tab_applescript.mm",
        "cocoa/applescript/window_applescript.h",
        "cocoa/applescript/window_applescript.mm",
        "cocoa/apps/chrome_app_window_client_views_cocoa.mm",
        "cocoa/apps/native_app_window_cocoa.h",
        "cocoa/apps/native_app_window_cocoa.mm",
        "cocoa/autofill/autofill_bubble_controller.h",
        "cocoa/autofill/autofill_bubble_controller.mm",
        "cocoa/autofill/autofill_layout.h",
        "cocoa/autofill/autofill_pop_up_button.h",
        "cocoa/autofill/autofill_pop_up_button.mm",
        "cocoa/autofill/autofill_popup_base_view_cocoa.h",
        "cocoa/autofill/autofill_popup_base_view_cocoa.mm",
        "cocoa/autofill/autofill_popup_view_bridge.h",
        "cocoa/autofill/autofill_popup_view_bridge.mm",
        "cocoa/autofill/autofill_popup_view_cocoa.h",
        "cocoa/autofill/autofill_popup_view_cocoa.mm",
        "cocoa/autofill/autofill_textfield.h",
        "cocoa/autofill/autofill_textfield.mm",
        "cocoa/autofill/autofill_tooltip_controller.h",
        "cocoa/autofill/autofill_tooltip_controller.mm",
        "cocoa/autofill/card_unmask_prompt_view_bridge.h",
        "cocoa/autofill/card_unmask_prompt_view_bridge.mm",
        "cocoa/autofill/card_unmask_prompt_view_views.mm",
        "cocoa/autofill/down_arrow_popup_menu_cell.h",
        "cocoa/autofill/down_arrow_popup_menu_cell.mm",
        "cocoa/autofill/layout_view.h",
        "cocoa/autofill/layout_view.mm",
        "cocoa/autofill/password_generation_popup_view_bridge.h",
        "cocoa/autofill/password_generation_popup_view_bridge.mm",
        "cocoa/autofill/password_generation_popup_view_cocoa.h",
        "cocoa/autofill/password_generation_popup_view_cocoa.mm",
        "cocoa/autofill/save_card_bubble_view_bridge.h",
        "cocoa/autofill/save_card_bubble_view_bridge.mm",
        "cocoa/autofill/simple_grid_layout.h",
        "cocoa/autofill/simple_grid_layout.mm",
        "cocoa/background_gradient_view.h",
        "cocoa/background_gradient_view.mm",
        "cocoa/base_bubble_controller.h",
        "cocoa/base_bubble_controller.mm",
        "cocoa/bookmarks/bookmark_all_tabs_controller.h",
        "cocoa/bookmarks/bookmark_all_tabs_controller.mm",
        "cocoa/bookmarks/bookmark_bar_bridge.h",
        "cocoa/bookmarks/bookmark_bar_bridge.mm",
        "cocoa/bookmarks/bookmark_bar_constants.h",
        "cocoa/bookmarks/bookmark_bar_controller.h",
        "cocoa/bookmarks/bookmark_bar_controller.mm",
        "cocoa/bookmarks/bookmark_bar_folder_button_cell.h",
        "cocoa/bookmarks/bookmark_bar_folder_button_cell.mm",
        "cocoa/bookmarks/bookmark_bar_folder_controller.h",
        "cocoa/bookmarks/bookmark_bar_folder_controller.mm",
        "cocoa/bookmarks/bookmark_bar_folder_hover_state.h",
        "cocoa/bookmarks/bookmark_bar_folder_hover_state.mm",
        "cocoa/bookmarks/bookmark_bar_folder_view.h",
        "cocoa/bookmarks/bookmark_bar_folder_view.mm",
        "cocoa/bookmarks/bookmark_bar_folder_window.h",
        "cocoa/bookmarks/bookmark_bar_folder_window.mm",
        "cocoa/bookmarks/bookmark_bar_state.h",
        "cocoa/bookmarks/bookmark_bar_toolbar_view.h",
        "cocoa/bookmarks/bookmark_bar_toolbar_view.mm",
        "cocoa/bookmarks/bookmark_bar_view_cocoa.h",
        "cocoa/bookmarks/bookmark_bar_view_cocoa.mm",
        "cocoa/bookmarks/bookmark_bubble_controller.h",
        "cocoa/bookmarks/bookmark_bubble_controller.mm",
        "cocoa/bookmarks/bookmark_bubble_observer_cocoa.h",
        "cocoa/bookmarks/bookmark_bubble_observer_cocoa.mm",
        "cocoa/bookmarks/bookmark_button.h",
        "cocoa/bookmarks/bookmark_button.mm",
        "cocoa/bookmarks/bookmark_button_cell.h",
        "cocoa/bookmarks/bookmark_button_cell.mm",
        "cocoa/bookmarks/bookmark_context_menu_cocoa_controller.h",
        "cocoa/bookmarks/bookmark_context_menu_cocoa_controller.mm",
        "cocoa/bookmarks/bookmark_drag_drop_cocoa.mm",
        "cocoa/bookmarks/bookmark_editor_base_controller.h",
        "cocoa/bookmarks/bookmark_editor_base_controller.mm",
        "cocoa/bookmarks/bookmark_editor_controller.h",
        "cocoa/bookmarks/bookmark_editor_controller.mm",
        "cocoa/bookmarks/bookmark_folder_target.h",
        "cocoa/bookmarks/bookmark_folder_target.mm",
        "cocoa/bookmarks/bookmark_model_observer_for_cocoa.h",
        "cocoa/bookmarks/bookmark_model_observer_for_cocoa.mm",
        "cocoa/bookmarks/bookmark_name_folder_controller.h",
        "cocoa/bookmarks/bookmark_name_folder_controller.mm",
        "cocoa/bookmarks/bookmark_tree_browser_cell.h",
        "cocoa/bookmarks/bookmark_tree_browser_cell.mm",
        "cocoa/browser/exclusive_access_controller_views.h",
        "cocoa/browser/exclusive_access_controller_views.mm",
        "cocoa/browser/zoom_bubble_controller.h",
        "cocoa/browser/zoom_bubble_controller.mm",
        "cocoa/browser_window_cocoa.h",
        "cocoa/browser_window_cocoa.mm",
        "cocoa/browser_window_controller.h",
        "cocoa/browser_window_controller.mm",
        "cocoa/browser_window_controller_private.h",
        "cocoa/browser_window_controller_private.mm",
        "cocoa/browser_window_factory_cocoa.mm",
        "cocoa/browser_window_fullscreen_transition.h",
        "cocoa/browser_window_fullscreen_transition.mm",
        "cocoa/browser_window_layout.h",
        "cocoa/browser_window_layout.mm",
        "cocoa/browser_window_utils.h",
        "cocoa/browser_window_utils.mm",
        "cocoa/bubble_combobox.h",
        "cocoa/bubble_combobox.mm",
        "cocoa/bubble_sync_promo_controller.h",
        "cocoa/bubble_sync_promo_controller.mm",
        "cocoa/bubble_view.h",
        "cocoa/bubble_view.mm",
        "cocoa/certificate_viewer_mac_cocoa.h",
        "cocoa/certificate_viewer_mac_cocoa.mm",
        "cocoa/chooser_content_view_cocoa.h",
        "cocoa/chooser_content_view_cocoa.mm",
        "cocoa/chrome_browser_window.h",
        "cocoa/chrome_browser_window.mm",
        "cocoa/chrome_event_processing_window.h",
        "cocoa/chrome_event_processing_window.mm",
        "cocoa/clickhold_button_cell.h",
        "cocoa/clickhold_button_cell.mm",
        "cocoa/confirm_bubble_cocoa.h",
        "cocoa/confirm_bubble_cocoa.mm",
        "cocoa/confirm_bubble_controller.h",
        "cocoa/confirm_bubble_controller.mm",
        "cocoa/constrained_web_dialog_delegate_mac.mm",
        "cocoa/constrained_window/constrained_window_alert.h",
        "cocoa/constrained_window/constrained_window_alert.mm",
        "cocoa/constrained_window/constrained_window_button.h",
        "cocoa/constrained_window/constrained_window_button.mm",
        "cocoa/constrained_window/constrained_window_control_utils.h",
        "cocoa/constrained_window/constrained_window_control_utils.mm",
        "cocoa/constrained_window/constrained_window_custom_sheet.h",
        "cocoa/constrained_window/constrained_window_custom_sheet.mm",
        "cocoa/constrained_window/constrained_window_custom_window.h",
        "cocoa/constrained_window/constrained_window_custom_window.mm",
        "cocoa/constrained_window/constrained_window_mac.h",
        "cocoa/constrained_window/constrained_window_mac.mm",
        "cocoa/constrained_window/constrained_window_sheet.h",
        "cocoa/constrained_window/constrained_window_sheet_controller.h",
        "cocoa/constrained_window/constrained_window_sheet_controller.mm",
        "cocoa/constrained_window/constrained_window_sheet_info.h",
        "cocoa/constrained_window/constrained_window_sheet_info.mm",
        "cocoa/constrained_window/constrained_window_web_dialog_sheet.h",
        "cocoa/constrained_window/constrained_window_web_dialog_sheet.mm",
        "cocoa/content_settings/collected_cookies_mac.h",
        "cocoa/content_settings/collected_cookies_mac.mm",
        "cocoa/content_settings/content_setting_bubble_cocoa.h",
        "cocoa/content_settings/content_setting_bubble_cocoa.mm",
        "cocoa/content_settings/cookie_details.h",
        "cocoa/content_settings/cookie_details.mm",
        "cocoa/content_settings/cookie_details_view_controller.h",
        "cocoa/content_settings/cookie_details_view_controller.mm",
        "cocoa/content_settings/cookie_tree_node.h",
        "cocoa/content_settings/cookie_tree_node.mm",
        "cocoa/content_settings/cookies_tree_controller_bridge.h",
        "cocoa/content_settings/cookies_tree_controller_bridge.mm",
        "cocoa/create_application_shortcut_cocoa.mm",
        "cocoa/create_native_web_modal_manager_cocoa.mm",
        "cocoa/custom_frame_view.h",
        "cocoa/custom_frame_view.mm",
        "cocoa/dev_tools_controller.h",
        "cocoa/dev_tools_controller.mm",
        "cocoa/download/background_theme.h",
        "cocoa/download/background_theme.mm",
        "cocoa/download/download_danger_prompt_impl.cc",
        "cocoa/download/download_item_button.h",
        "cocoa/download/download_item_button.mm",
        "cocoa/download/download_item_cell.h",
        "cocoa/download/download_item_cell.mm",
        "cocoa/download/download_item_controller.h",
        "cocoa/download/download_item_controller.mm",
        "cocoa/download/download_item_mac.h",
        "cocoa/download/download_item_mac.mm",
        "cocoa/download/download_shelf_context_menu_controller.h",
        "cocoa/download/download_shelf_context_menu_controller.mm",
        "cocoa/download/download_shelf_controller.h",
        "cocoa/download/download_shelf_controller.mm",
        "cocoa/download/download_shelf_mac.h",
        "cocoa/download/download_shelf_mac.mm",
        "cocoa/download/download_shelf_view_cocoa.h",
        "cocoa/download/download_shelf_view_cocoa.mm",
        "cocoa/download/download_show_all_button.h",
        "cocoa/download/download_show_all_button.mm",
        "cocoa/download/download_show_all_cell.h",
        "cocoa/download/download_show_all_cell.mm",
        "cocoa/download/download_started_animation_mac.mm",
        "cocoa/drag_util.h",
        "cocoa/drag_util.mm",
        "cocoa/draggable_button.h",
        "cocoa/draggable_button.mm",
        "cocoa/draggable_button_mixin.h",
        "cocoa/draggable_button_mixin.mm",
        "cocoa/extensions/browser_action_button.h",
        "cocoa/extensions/browser_action_button.mm",
        "cocoa/extensions/browser_actions_container_view.h",
        "cocoa/extensions/browser_actions_container_view.mm",
        "cocoa/extensions/browser_actions_controller.h",
        "cocoa/extensions/browser_actions_controller.mm",
        "cocoa/extensions/chooser_dialog_cocoa.h",
        "cocoa/extensions/chooser_dialog_cocoa.mm",
        "cocoa/extensions/chooser_dialog_cocoa_controller.h",
        "cocoa/extensions/chooser_dialog_cocoa_controller.mm",
        "cocoa/extensions/device_permissions_dialog_controller.h",
        "cocoa/extensions/device_permissions_dialog_controller.mm",
        "cocoa/extensions/device_permissions_view_controller.h",
        "cocoa/extensions/device_permissions_view_controller.mm",
        "cocoa/extensions/extension_action_platform_delegate_cocoa.h",
        "cocoa/extensions/extension_action_platform_delegate_cocoa.mm",
        "cocoa/extensions/extension_install_dialog_controller.h",
        "cocoa/extensions/extension_install_dialog_controller.mm",
        "cocoa/extensions/extension_install_view_controller.h",
        "cocoa/extensions/extension_install_view_controller.mm",
        "cocoa/extensions/extension_installed_bubble_controller.h",
        "cocoa/extensions/extension_installed_bubble_controller.mm",
        "cocoa/extensions/extension_keybinding_registry_cocoa.h",
        "cocoa/extensions/extension_keybinding_registry_cocoa.mm",
        "cocoa/extensions/extension_popup_controller.h",
        "cocoa/extensions/extension_popup_controller.mm",
        "cocoa/extensions/extension_uninstall_dialog_cocoa.mm",
        "cocoa/extensions/extension_view_mac.h",
        "cocoa/extensions/extension_view_mac.mm",
        "cocoa/extensions/media_galleries_dialog_cocoa.h",
        "cocoa/extensions/media_galleries_dialog_cocoa.mm",
        "cocoa/extensions/media_gallery_list_entry_view.h",
        "cocoa/extensions/media_gallery_list_entry_view.mm",
        "cocoa/extensions/toolbar_actions_bar_bubble_mac.h",
        "cocoa/extensions/toolbar_actions_bar_bubble_mac.mm",
        "cocoa/extensions/windowed_install_dialog_controller.h",
        "cocoa/extensions/windowed_install_dialog_controller.mm",
        "cocoa/external_protocol_dialog.h",
        "cocoa/external_protocol_dialog.mm",
        "cocoa/fast_resize_view.h",
        "cocoa/fast_resize_view.mm",
        "cocoa/find_bar/find_bar_bridge.h",
        "cocoa/find_bar/find_bar_bridge.mm",
        "cocoa/find_bar/find_bar_cocoa_controller.h",
        "cocoa/find_bar/find_bar_cocoa_controller.mm",
        "cocoa/find_bar/find_bar_text_field.h",
        "cocoa/find_bar/find_bar_text_field.mm",
        "cocoa/find_bar/find_bar_text_field_cell.h",
        "cocoa/find_bar/find_bar_text_field_cell.mm",
        "cocoa/find_bar/find_bar_view_cocoa.h",
        "cocoa/find_bar/find_bar_view_cocoa.mm",
        "cocoa/first_run_bubble_controller.h",
        "cocoa/first_run_bubble_controller.mm",
        "cocoa/floating_bar_backing_view.h",
        "cocoa/floating_bar_backing_view.mm",
        "cocoa/framed_browser_window.h",
        "cocoa/framed_browser_window.mm",
        "cocoa/full_size_content_window.h",
        "cocoa/full_size_content_window.mm",
        "cocoa/fullscreen/fullscreen_menubar_tracker.h",
        "cocoa/fullscreen/fullscreen_menubar_tracker.mm",
        "cocoa/fullscreen/fullscreen_toolbar_animation_controller.h",
        "cocoa/fullscreen/fullscreen_toolbar_animation_controller.mm",
        "cocoa/fullscreen/fullscreen_toolbar_controller.h",
        "cocoa/fullscreen/fullscreen_toolbar_controller.mm",
        "cocoa/fullscreen/fullscreen_toolbar_mouse_tracker.h",
        "cocoa/fullscreen/fullscreen_toolbar_mouse_tracker.mm",
        "cocoa/fullscreen/fullscreen_toolbar_visibility_lock_controller.h",
        "cocoa/fullscreen/fullscreen_toolbar_visibility_lock_controller.mm",
        "cocoa/fullscreen/immersive_fullscreen_controller.h",
        "cocoa/fullscreen/immersive_fullscreen_controller.mm",
        "cocoa/fullscreen_low_power_coordinator.h",
        "cocoa/fullscreen_low_power_coordinator.mm",
        "cocoa/fullscreen_window.h",
        "cocoa/fullscreen_window.mm",
        "cocoa/global_error_bubble_controller.h",
        "cocoa/global_error_bubble_controller.mm",
        "cocoa/gradient_button_cell.h",
        "cocoa/gradient_button_cell.mm",
        "cocoa/has_weak_browser_pointer.h",
        "cocoa/hover_close_button.h",
        "cocoa/hover_close_button.mm",
        "cocoa/hung_renderer_controller.h",
        "cocoa/hung_renderer_controller.mm",
        "cocoa/image_button_cell.h",
        "cocoa/image_button_cell.mm",
        "cocoa/importer/import_lock_dialog_cocoa.mm",
        "cocoa/info_bubble_view.h",
        "cocoa/info_bubble_view.mm",
        "cocoa/info_bubble_window.h",
        "cocoa/info_bubble_window.mm",
        "cocoa/infobars/after_translate_infobar_controller.h",
        "cocoa/infobars/after_translate_infobar_controller.mm",
        "cocoa/infobars/alternate_nav_infobar_controller.h",
        "cocoa/infobars/alternate_nav_infobar_controller.mm",
        "cocoa/infobars/before_translate_infobar_controller.h",
        "cocoa/infobars/before_translate_infobar_controller.mm",
        "cocoa/infobars/confirm_infobar_controller.h",
        "cocoa/infobars/confirm_infobar_controller.mm",
        "cocoa/infobars/infobar_cocoa.h",
        "cocoa/infobars/infobar_cocoa.mm",
        "cocoa/infobars/infobar_container_cocoa.h",
        "cocoa/infobars/infobar_container_cocoa.mm",
        "cocoa/infobars/infobar_container_controller.h",
        "cocoa/infobars/infobar_container_controller.mm",
        "cocoa/infobars/infobar_controller.h",
        "cocoa/infobars/infobar_controller.mm",
        "cocoa/infobars/infobar_gradient_view.h",
        "cocoa/infobars/infobar_gradient_view.mm",
        "cocoa/infobars/infobar_utilities.h",
        "cocoa/infobars/infobar_utilities.mm",
        "cocoa/infobars/translate_infobar_base.h",
        "cocoa/infobars/translate_infobar_base.mm",
        "cocoa/infobars/translate_message_infobar_controller.h",
        "cocoa/infobars/translate_message_infobar_controller.mm",
        "cocoa/javascript_app_modal_dialog_cocoa.h",
        "cocoa/javascript_app_modal_dialog_cocoa.mm",
        "cocoa/location_bar/autocomplete_text_field.h",
        "cocoa/location_bar/autocomplete_text_field.mm",
        "cocoa/location_bar/autocomplete_text_field_cell.h",
        "cocoa/location_bar/autocomplete_text_field_cell.mm",
        "cocoa/location_bar/autocomplete_text_field_editor.h",
        "cocoa/location_bar/autocomplete_text_field_editor.mm",
        "cocoa/location_bar/bubble_decoration.h",
        "cocoa/location_bar/bubble_decoration.mm",
        "cocoa/location_bar/content_setting_decoration.h",
        "cocoa/location_bar/content_setting_decoration.mm",
        "cocoa/location_bar/image_decoration.h",
        "cocoa/location_bar/image_decoration.mm",
        "cocoa/location_bar/keyword_hint_decoration.h",
        "cocoa/location_bar/keyword_hint_decoration.mm",
        "cocoa/location_bar/location_bar_decoration.h",
        "cocoa/location_bar/location_bar_decoration.mm",
        "cocoa/location_bar/location_bar_view_mac.h",
        "cocoa/location_bar/location_bar_view_mac.mm",
        "cocoa/location_bar/location_icon_decoration.h",
        "cocoa/location_bar/location_icon_decoration.mm",
        "cocoa/location_bar/manage_passwords_decoration.h",
        "cocoa/location_bar/manage_passwords_decoration.mm",
        "cocoa/location_bar/page_action_decoration.h",
        "cocoa/location_bar/page_action_decoration.mm",
        "cocoa/location_bar/save_credit_card_decoration.h",
        "cocoa/location_bar/save_credit_card_decoration.mm",
        "cocoa/location_bar/security_state_bubble_decoration.h",
        "cocoa/location_bar/security_state_bubble_decoration.mm",
        "cocoa/location_bar/selected_keyword_decoration.h",
        "cocoa/location_bar/selected_keyword_decoration.mm",
        "cocoa/location_bar/star_decoration.h",
        "cocoa/location_bar/star_decoration.mm",
        "cocoa/location_bar/translate_decoration.h",
        "cocoa/location_bar/translate_decoration.mm",
        "cocoa/location_bar/zoom_decoration.h",
        "cocoa/location_bar/zoom_decoration.mm",
        "cocoa/login_handler_cocoa.h",
        "cocoa/login_handler_cocoa.mm",
        "cocoa/main_menu_item.h",
        "cocoa/menu_button.h",
        "cocoa/menu_button.mm",
        "cocoa/multi_key_equivalent_button.h",
        "cocoa/multi_key_equivalent_button.mm",
        "cocoa/new_tab_button.h",
        "cocoa/new_tab_button.mm",
        "cocoa/omnibox/omnibox_popup_cell.h",
        "cocoa/omnibox/omnibox_popup_cell.mm",
        "cocoa/omnibox/omnibox_popup_matrix.h",
        "cocoa/omnibox/omnibox_popup_matrix.mm",
        "cocoa/omnibox/omnibox_popup_separator_view.h",
        "cocoa/omnibox/omnibox_popup_separator_view.mm",
        "cocoa/omnibox/omnibox_popup_view_mac.h",
        "cocoa/omnibox/omnibox_popup_view_mac.mm",
        "cocoa/omnibox/omnibox_view_mac.h",
        "cocoa/omnibox/omnibox_view_mac.mm",
        "cocoa/omnibox_decoration_bubble_controller.h",
        "cocoa/omnibox_decoration_bubble_controller.mm",
        "cocoa/one_click_signin_dialog_controller.h",
        "cocoa/one_click_signin_dialog_controller.mm",
        "cocoa/one_click_signin_view_controller.h",
        "cocoa/one_click_signin_view_controller.mm",
        "cocoa/passwords/account_avatar_fetcher_manager.h",
        "cocoa/passwords/account_avatar_fetcher_manager.mm",
        "cocoa/passwords/account_chooser_view_controller.h",
        "cocoa/passwords/account_chooser_view_controller.mm",
        "cocoa/passwords/auto_signin_view_controller.h",
        "cocoa/passwords/auto_signin_view_controller.mm",
        "cocoa/passwords/autosignin_prompt_view_controller.h",
        "cocoa/passwords/autosignin_prompt_view_controller.mm",
        "cocoa/passwords/base_passwords_content_view_controller.h",
        "cocoa/passwords/base_passwords_content_view_controller.mm",
        "cocoa/passwords/confirmation_password_saved_view_controller.h",
        "cocoa/passwords/confirmation_password_saved_view_controller.mm",
        "cocoa/passwords/credential_item_button.h",
        "cocoa/passwords/credential_item_button.mm",
        "cocoa/passwords/credentials_selection_view.h",
        "cocoa/passwords/credentials_selection_view.mm",
        "cocoa/passwords/manage_passwords_view_controller.h",
        "cocoa/passwords/manage_passwords_view_controller.mm",
        "cocoa/passwords/password_item_views.h",
        "cocoa/passwords/password_prompt_view_bridge.h",
        "cocoa/passwords/password_prompt_view_bridge.mm",
        "cocoa/passwords/passwords_bubble_cocoa.h",
        "cocoa/passwords/passwords_bubble_cocoa.mm",
        "cocoa/passwords/passwords_bubble_controller.h",
        "cocoa/passwords/passwords_bubble_controller.mm",
        "cocoa/passwords/passwords_bubble_utils.h",
        "cocoa/passwords/passwords_bubble_utils.mm",
        "cocoa/passwords/passwords_list_view_controller.h",
        "cocoa/passwords/passwords_list_view_controller.mm",
        "cocoa/passwords/pending_password_view_controller.h",
        "cocoa/passwords/pending_password_view_controller.mm",
        "cocoa/passwords/save_pending_password_view_controller.h",
        "cocoa/passwords/save_pending_password_view_controller.mm",
        "cocoa/passwords/signin_promo_view_controller.h",
        "cocoa/passwords/signin_promo_view_controller.mm",
        "cocoa/passwords/update_pending_password_view_controller.h",
        "cocoa/passwords/update_pending_password_view_controller.mm",
        "cocoa/profiles/avatar_base_controller.h",
        "cocoa/profiles/avatar_base_controller.mm",
        "cocoa/profiles/avatar_button.h",
        "cocoa/profiles/avatar_button.mm",
        "cocoa/profiles/avatar_button_controller.h",
        "cocoa/profiles/avatar_button_controller.mm",
        "cocoa/profiles/avatar_icon_controller.h",
        "cocoa/profiles/avatar_icon_controller.mm",
        "cocoa/profiles/avatar_menu_bubble_controller.h",
        "cocoa/profiles/avatar_menu_bubble_controller.mm",
        "cocoa/profiles/profile_chooser_controller.h",
        "cocoa/profiles/profile_chooser_controller.mm",
        "cocoa/profiles/profile_signin_confirmation_dialog_cocoa.h",
        "cocoa/profiles/profile_signin_confirmation_dialog_cocoa.mm",
        "cocoa/profiles/profile_signin_confirmation_view_controller.h",
        "cocoa/profiles/profile_signin_confirmation_view_controller.mm",
        "cocoa/profiles/signin_view_controller_delegate_mac.h",
        "cocoa/profiles/signin_view_controller_delegate_mac.mm",
        "cocoa/profiles/user_manager_mac.h",
        "cocoa/profiles/user_manager_mac.mm",
        "cocoa/rect_path_utils.h",
        "cocoa/rect_path_utils.mm",
        "cocoa/restart_browser.h",
        "cocoa/restart_browser.mm",
        "cocoa/screen_capture_notification_ui_cocoa.h",
        "cocoa/screen_capture_notification_ui_cocoa.mm",
        "cocoa/session_crashed_bubble.mm",
        "cocoa/simple_message_box_mac.mm",
        "cocoa/single_web_contents_dialog_manager_cocoa.h",
        "cocoa/single_web_contents_dialog_manager_cocoa.mm",
        "cocoa/spinner_view.h",
        "cocoa/spinner_view.mm",
        "cocoa/sprite_view.h",
        "cocoa/sprite_view.mm",
        "cocoa/ssl_client_certificate_selector_cocoa.h",
        "cocoa/ssl_client_certificate_selector_cocoa.mm",
        "cocoa/status_bubble_mac.h",
        "cocoa/status_bubble_mac.mm",
        "cocoa/styled_text_field.h",
        "cocoa/styled_text_field.mm",
        "cocoa/styled_text_field_cell.h",
        "cocoa/styled_text_field_cell.mm",
        "cocoa/tab_contents/favicon_util_mac.h",
        "cocoa/tab_contents/favicon_util_mac.mm",
        "cocoa/tab_contents/overlayable_contents_controller.h",
        "cocoa/tab_contents/overlayable_contents_controller.mm",
        "cocoa/tab_contents/tab_contents_controller.h",
        "cocoa/tab_contents/tab_contents_controller.mm",
        "cocoa/tab_dialogs_cocoa.h",
        "cocoa/tab_dialogs_cocoa.mm",
        "cocoa/tab_modal_confirm_dialog_mac.h",
        "cocoa/tab_modal_confirm_dialog_mac.mm",
        "cocoa/tabs/alert_indicator_button_cocoa.h",
        "cocoa/tabs/alert_indicator_button_cocoa.mm",
        "cocoa/tabs/tab_controller.h",
        "cocoa/tabs/tab_controller.mm",
        "cocoa/tabs/tab_strip_background_view.h",
        "cocoa/tabs/tab_strip_background_view.mm",
        "cocoa/tabs/tab_strip_controller.h",
        "cocoa/tabs/tab_strip_controller.mm",
        "cocoa/tabs/tab_strip_drag_controller.h",
        "cocoa/tabs/tab_strip_drag_controller.mm",
        "cocoa/tabs/tab_strip_model_observer_bridge.h",
        "cocoa/tabs/tab_strip_model_observer_bridge.mm",
        "cocoa/tabs/tab_strip_view.h",
        "cocoa/tabs/tab_strip_view.mm",
        "cocoa/tabs/tab_view.h",
        "cocoa/tabs/tab_view.mm",
        "cocoa/tabs/tab_window_controller.h",
        "cocoa/tabs/tab_window_controller.mm",
        "cocoa/task_manager_mac.h",
        "cocoa/task_manager_mac.mm",
        "cocoa/themed_window.h",
        "cocoa/themed_window.mm",
        "cocoa/toolbar/app_toolbar_button.h",
        "cocoa/toolbar/app_toolbar_button.mm",
        "cocoa/toolbar/app_toolbar_button_cell.h",
        "cocoa/toolbar/app_toolbar_button_cell.mm",
        "cocoa/toolbar/back_forward_menu_controller.h",
        "cocoa/toolbar/back_forward_menu_controller.mm",
        "cocoa/toolbar/media_router_action_platform_delegate_cocoa.h",
        "cocoa/toolbar/media_router_action_platform_delegate_cocoa.mm",
        "cocoa/toolbar/reload_button_cocoa.h",
        "cocoa/toolbar/reload_button_cocoa.mm",
        "cocoa/toolbar/toolbar_button_cocoa.h",
        "cocoa/toolbar/toolbar_button_cocoa.mm",
        "cocoa/toolbar/toolbar_controller.h",
        "cocoa/toolbar/toolbar_controller.mm",
        "cocoa/toolbar/toolbar_view_cocoa.h",
        "cocoa/toolbar/toolbar_view_cocoa.mm",
        "cocoa/translate/translate_bubble_controller.h",
        "cocoa/translate/translate_bubble_controller.mm",
        "cocoa/url_drop_target.h",
        "cocoa/url_drop_target.mm",
        "cocoa/validation_message_bubble_cocoa.h",
        "cocoa/validation_message_bubble_cocoa.mm",
        "cocoa/validation_message_bubble_controller.h",
        "cocoa/vertical_gradient_view.h",
        "cocoa/vertical_gradient_view.mm",
        "cocoa/view_id_util.h",
        "cocoa/view_id_util.mm",
        "cocoa/view_resizer.h",
        "cocoa/web_contents_modal_dialog_manager_views_mac.h",
        "cocoa/web_contents_modal_dialog_manager_views_mac.mm",
        "cocoa/website_settings/chooser_bubble_ui_cocoa.h",
        "cocoa/website_settings/chooser_bubble_ui_cocoa.mm",
        "cocoa/website_settings/permission_bubble_cocoa.h",
        "cocoa/website_settings/permission_bubble_cocoa.mm",
        "cocoa/website_settings/permission_bubble_controller.h",
        "cocoa/website_settings/permission_bubble_controller.mm",
        "cocoa/website_settings/permission_prompt_impl_views_mac.mm",
        "cocoa/website_settings/permission_selector_button.h",
        "cocoa/website_settings/permission_selector_button.mm",
        "cocoa/website_settings/split_block_button.h",
        "cocoa/website_settings/split_block_button.mm",
        "cocoa/website_settings/website_settings_bubble_controller.h",
        "cocoa/website_settings/website_settings_bubble_controller.mm",
        "cocoa/website_settings/website_settings_utils_cocoa.h",
        "cocoa/website_settings/website_settings_utils_cocoa.mm",
        "cocoa/window_size_autosaver.h",
        "cocoa/window_size_autosaver.mm",

        # TODO(estade): this class should be deleted in favor of a combobox model.
        # See crbug.com/590850
        "content_settings/content_setting_media_menu_model.cc",
        "content_settings/content_setting_media_menu_model.h",
        "javascript_dialogs/javascript_dialog_cocoa.h",
        "javascript_dialogs/javascript_dialog_cocoa.mm",
        "javascript_dialogs/javascript_dialog_mac.cc",
        "proximity_auth/proximity_auth_error_bubble_stub.cc",
      ]
    }
    include_dirs = [ "$target_gen_dir" ]
    libs += [
      "Carbon.framework",
      "Quartz.framework",
    ]
  } else {  # non-Mac.
    sources += [ "web_contents_sizer.cc" ]
  }

  if (is_win) {
    sources += [
      "input_method/input_method_engine.cc",
      "input_method/input_method_engine.h",
      "input_method/input_method_engine_base.cc",
      "input_method/input_method_engine_base.h",
      "network_profile_bubble.cc",
      "network_profile_bubble.h",
      "views/color_chooser_dialog.cc",
      "views/color_chooser_dialog.h",
      "views/critical_notification_bubble_view.cc",
      "views/critical_notification_bubble_view.h",
      "views/frame/browser_desktop_window_tree_host.h",
      "views/frame/browser_desktop_window_tree_host_win.cc",
      "views/frame/browser_desktop_window_tree_host_win.h",
      "views/frame/glass_browser_frame_view.cc",
      "views/frame/glass_browser_frame_view.h",
      "views/frame/native_browser_frame_factory_aurawin.cc",
      "views/frame/windows_10_caption_button.cc",
      "views/frame/windows_10_caption_button.h",
      "views/network_profile_bubble_view.cc",
      "views/uninstall_view.cc",
      "views/uninstall_view.h",
      "webui/cast/cast_ui.cc",
      "webui/cast/cast_ui.h",
      "webui/conflicts_ui.cc",
      "webui/conflicts_ui.h",
      "webui/welcome_win10_handler.cc",
      "webui/welcome_win10_handler.h",
      "webui/welcome_win10_ui.cc",
      "webui/welcome_win10_ui.h",
    ]
    public_deps += [
      "//ui/views",
      "//ui/views/controls/webview",
    ]
    deps += [
      "//components/search_engines",
      "//google_update",
      "//third_party/iaccessible2",
      "//third_party/isimpledom",
      "//third_party/wtl",
      "//ui/base/ime",
      "//ui/events:dom_keycode_converter",
    ]
    if (!is_chrome_branded) {
      deps -= [ "//google_update" ]
      sources -= [ "webui/help/version_updater_win.cc" ]
      sources += [
        "webui/help/version_updater_basic.cc",
        "webui/help/version_updater_basic.h",
      ]
    }
  } else {  # 'OS!="win"
    # The Cast Linux build sets toolkit_views to false, but many files in this
    # target include views-related files unconditionally, causing `gn check`
    # to fail on this variant. Since this target is only referenced (but not
    # compiled) on this variant, it's okay to add this "incorrect" dependency
    # to Cast Linux builds so that `gn check` passes.
    if (toolkit_views || (is_chromecast && is_linux)) {
      public_deps += [
        "//ui/views",
        "//ui/views/controls/webview",
      ]
    }
  }
  if (is_desktop_linux) {
    sources += [
      "input_method/input_method_engine.cc",
      "input_method/input_method_engine.h",
      "input_method/input_method_engine_base.cc",
      "input_method/input_method_engine_base.h",
      "views/apps/chrome_app_window_client_views_linux.cc",
      "views/first_run_dialog.cc",
      "views/first_run_dialog.h",
      "views/frame/browser_desktop_window_tree_host.h",
      "views/status_icons/status_icon_linux_wrapper.cc",
      "views/status_icons/status_icon_linux_wrapper.h",
      "webui/help/version_updater_basic.cc",
      "webui/help/version_updater_basic.h",
    ]
    deps += [
      "//ui/base/ime",
      "//ui/events:dom_keycode_converter",
    ]

    if (use_x11) {
      sources += [
        "views/frame/browser_desktop_window_tree_host_x11.cc",
        "views/frame/browser_desktop_window_tree_host_x11.h",
        "views/frame/desktop_browser_frame_aurax11.cc",
        "views/frame/desktop_browser_frame_aurax11.h",
        "views/frame/global_menu_bar_registrar_x11.cc",
        "views/frame/global_menu_bar_registrar_x11.h",
        "views/frame/global_menu_bar_x11.cc",
        "views/frame/global_menu_bar_x11.h",
        "views/frame/native_browser_frame_factory_aurax11.cc",
        "views/javascript_app_modal_dialog_views_x11.cc",
        "views/javascript_app_modal_dialog_views_x11.h",
      ]
    }
    if (use_ozone) {
      sources += [
        "views/frame/browser_desktop_window_tree_host_ozone.cc",
        "views/frame/native_browser_frame_factory_ozone.cc",
      ]
    }
  }
  if (is_linux) {  # Both desktop Linux and ChromeOS.
    sources += [
      "certificate_dialogs.cc",
      "certificate_dialogs.h",
      "webui/certificate_viewer_ui.cc",
      "webui/certificate_viewer_ui.h",
      "webui/certificate_viewer_webui.cc",
      "webui/certificate_viewer_webui.h",
    ]
    if (use_aura) {
      deps += [ "//build/linux:fontconfig" ]
      if (use_dbus) {
        deps += [ "//dbus" ]
      }
    }
    if (use_x11) {
      sources += [
        "views/javascript_app_modal_event_blocker_x11.cc",
        "views/javascript_app_modal_event_blocker_x11.h",
      ]
      configs += [ "//build/config/linux:x11" ]
      deps += [
        "//ui/events/devices",
        "//ui/events/devices/x11",
      ]
      if (is_desktop_linux) {
        sources += [ "views/tabs/window_finder_x11.cc" ]
      }
    }
    if (use_ozone) {
      sources += [ "views/tabs/window_finder_ozone.cc" ]
    }
  }

  if (use_udev) {
    deps += [ "//device/udev_linux" ]
  }

  if (enable_app_list) {
    sources += [
      "app_list/app_context_menu.cc",
      "app_list/app_context_menu.h",
      "app_list/app_context_menu_delegate.h",
      "app_list/app_list_controller_delegate.cc",
      "app_list/app_list_controller_delegate.h",
      "app_list/app_list_controller_delegate_impl.cc",
      "app_list/app_list_controller_delegate_impl.h",
      "app_list/app_list_model_builder.cc",
      "app_list/app_list_model_builder.h",
      "app_list/app_list_positioner.cc",
      "app_list/app_list_positioner.h",
      "app_list/app_list_service.cc",
      "app_list/app_list_service.h",
      "app_list/app_list_service_impl.cc",
      "app_list/app_list_service_impl.h",
      "app_list/app_list_syncable_service.cc",
      "app_list/app_list_syncable_service.h",
      "app_list/app_list_syncable_service_factory.cc",
      "app_list/app_list_syncable_service_factory.h",
      "app_list/app_list_view_delegate.cc",
      "app_list/app_list_view_delegate.h",
      "app_list/chrome_app_list_item.cc",
      "app_list/chrome_app_list_item.h",
      "app_list/extension_app_context_menu.cc",
      "app_list/extension_app_context_menu.h",
      "app_list/extension_app_item.cc",
      "app_list/extension_app_item.h",
      "app_list/extension_app_model_builder.cc",
      "app_list/extension_app_model_builder.h",
      "app_list/extension_uninstaller.cc",
      "app_list/extension_uninstaller.h",
      "app_list/fast_show_pickler.cc",
      "app_list/fast_show_pickler.h",
      "app_list/google_now_extension.cc",
      "app_list/google_now_extension.h",
      "app_list/launcher_page_event_dispatcher.cc",
      "app_list/launcher_page_event_dispatcher.h",
      "app_list/profile_loader.cc",
      "app_list/profile_loader.h",
      "app_list/profile_store.h",
      "app_list/search/app_result.cc",
      "app_list/search/app_result.h",
      "app_list/search/app_search_provider.cc",
      "app_list/search/app_search_provider.h",
      "app_list/search/common/json_response_fetcher.cc",
      "app_list/search/common/json_response_fetcher.h",
      "app_list/search/common/url_icon_source.cc",
      "app_list/search/common/url_icon_source.h",
      "app_list/search/common/webservice_cache.cc",
      "app_list/search/common/webservice_cache.h",
      "app_list/search/common/webservice_cache_factory.cc",
      "app_list/search/common/webservice_cache_factory.h",
      "app_list/search/common/webservice_search_provider.cc",
      "app_list/search/common/webservice_search_provider.h",
      "app_list/search/extension_app_result.cc",
      "app_list/search/extension_app_result.h",
      "app_list/search/history_factory.cc",
      "app_list/search/history_factory.h",
      "app_list/search/omnibox_provider.cc",
      "app_list/search/omnibox_provider.h",
      "app_list/search/omnibox_result.cc",
      "app_list/search/omnibox_result.h",
      "app_list/search/search_controller_factory.cc",
      "app_list/search/search_controller_factory.h",
      "app_list/search/search_resource_manager.cc",
      "app_list/search/search_resource_manager.h",
      "app_list/search/search_util.cc",
      "app_list/search/search_util.h",
      "app_list/search/search_webstore_result.cc",
      "app_list/search/search_webstore_result.h",
      "app_list/search/suggestions/suggestions_search_provider.cc",
      "app_list/search/suggestions/suggestions_search_provider.h",
      "app_list/search/suggestions/url_suggestion_result.cc",
      "app_list/search/suggestions/url_suggestion_result.h",
      "app_list/search/webstore/webstore_installer.cc",
      "app_list/search/webstore/webstore_installer.h",
      "app_list/search/webstore/webstore_provider.cc",
      "app_list/search/webstore/webstore_provider.h",
      "app_list/search/webstore/webstore_result.cc",
      "app_list/search/webstore/webstore_result.h",
      "app_list/speech_auth_helper.cc",
      "app_list/speech_auth_helper.h",
      "app_list/speech_recognizer.cc",
      "app_list/speech_recognizer.h",
      "app_list/speech_recognizer_delegate.h",
      "app_list/start_page_observer.h",
      "app_list/start_page_service.cc",
      "app_list/start_page_service.h",
      "app_list/start_page_service_factory.cc",
      "app_list/start_page_service_factory.h",
      "webui/app_list/start_page_handler.cc",
      "webui/app_list/start_page_handler.h",
      "webui/app_list/start_page_ui.cc",
      "webui/app_list/start_page_ui.h",
    ]
    if (is_chromeos) {
      sources += [
        "app_list/arc/arc_app_context_menu.cc",
        "app_list/arc/arc_app_context_menu.h",
        "app_list/arc/arc_app_dialog.h",
        "app_list/arc/arc_app_icon.cc",
        "app_list/arc/arc_app_icon.h",
        "app_list/arc/arc_app_icon_loader.cc",
        "app_list/arc/arc_app_icon_loader.h",
        "app_list/arc/arc_app_item.cc",
        "app_list/arc/arc_app_item.h",
        "app_list/arc/arc_app_launcher.cc",
        "app_list/arc/arc_app_launcher.h",
        "app_list/arc/arc_app_list_prefs.cc",
        "app_list/arc/arc_app_list_prefs.h",
        "app_list/arc/arc_app_list_prefs_factory.cc",
        "app_list/arc/arc_app_list_prefs_factory.h",
        "app_list/arc/arc_app_model_builder.cc",
        "app_list/arc/arc_app_model_builder.h",
        "app_list/arc/arc_app_utils.cc",
        "app_list/arc/arc_app_utils.h",
        "app_list/arc/arc_default_app_list.cc",
        "app_list/arc/arc_default_app_list.h",
        "app_list/arc/arc_package_sync_data_type_controller.cc",
        "app_list/arc/arc_package_sync_data_type_controller.h",
        "app_list/arc/arc_package_syncable_service.cc",
        "app_list/arc/arc_package_syncable_service.h",
        "app_list/arc/arc_package_syncable_service_factory.cc",
        "app_list/arc/arc_package_syncable_service_factory.h",
        "app_list/search/arc_app_result.cc",
        "app_list/search/arc_app_result.h",
        "ash/launcher/arc_app_deferred_launcher_controller.cc",
        "ash/launcher/arc_app_deferred_launcher_controller.h",
        "ash/launcher/arc_app_deferred_launcher_item_controller.cc",
        "ash/launcher/arc_app_deferred_launcher_item_controller.h",
        "ash/launcher/arc_app_shelf_id.cc",
        "ash/launcher/arc_app_shelf_id.h",
        "ash/launcher/arc_app_window_launcher_controller.cc",
        "ash/launcher/arc_app_window_launcher_controller.h",
        "ash/launcher/arc_app_window_launcher_item_controller.cc",
        "ash/launcher/arc_app_window_launcher_item_controller.h",
        "ash/launcher/arc_launcher_context_menu.cc",
        "ash/launcher/arc_launcher_context_menu.h",
        "ash/launcher/launcher_arc_app_updater.cc",
        "ash/launcher/launcher_arc_app_updater.h",
        "views/arc_app_dialog_view.cc",
      ]
    }
    if (is_desktop_linux) {
      sources += [
        "views/app_list/linux/app_list_linux.cc",
        "views/app_list/linux/app_list_linux.h",
        "views/app_list/linux/app_list_service_linux.cc",
        "views/app_list/linux/app_list_service_linux.h",
      ]
    }
    if (!is_mac && !use_ash) {
      sources += [
        "app_list/app_list_controller_delegate_views.cc",
        "app_list/app_list_controller_delegate_views.h",
        "app_list/app_list_service_views.cc",
        "app_list/app_list_service_views.h",
        "app_list/app_list_shower_views.cc",
        "app_list/app_list_shower_views.h",
      ]
    }
    deps += [ "//ui/app_list" ]
  } else {
    sources += [
      "app_list/app_list_service.h",
      "app_list/app_list_service_disabled.cc",
      "app_list/app_list_service_disabled_mac.h",
      "app_list/app_list_service_disabled_mac.mm",
    ]
  }
  if (!android_java_ui) {
    deps += [
      "//third_party/libaddressinput",
      "//third_party/libaddressinput:strings",
    ]
  }
  if (enable_extensions) {
    deps += [
      "//chrome/browser/extensions",
      "//chrome/common/extensions/api",
      "//chrome/common/extensions/api:api_registration",
    ]
    allow_circular_includes_from += [ "//chrome/browser/extensions" ]
    sources += [
      "extensions/accelerator_priority.cc",
      "extensions/accelerator_priority.h",
      "extensions/app_launch_params.cc",
      "extensions/app_launch_params.h",
      "extensions/application_launch.cc",
      "extensions/application_launch.h",
      "extensions/blocked_action_bubble_delegate.cc",
      "extensions/blocked_action_bubble_delegate.h",
      "extensions/extension_action_platform_delegate.h",
      "extensions/extension_action_view_controller.cc",
      "extensions/extension_action_view_controller.h",
      "extensions/extension_enable_flow.cc",
      "extensions/extension_enable_flow.h",
      "extensions/extension_enable_flow_delegate.h",
      "extensions/extension_install_ui_default.cc",
      "extensions/extension_install_ui_default.h",
      "extensions/extension_install_ui_factory.cc",
      "extensions/extension_install_ui_factory.h",
      "extensions/extension_installed_bubble.cc",
      "extensions/extension_installed_bubble.h",
      "extensions/extension_message_bubble_bridge.cc",
      "extensions/extension_message_bubble_bridge.h",
      "extensions/extension_message_bubble_factory.cc",
      "extensions/extension_message_bubble_factory.h",
      "extensions/hosted_app_browser_controller.cc",
      "extensions/hosted_app_browser_controller.h",
      "extensions/icon_with_badge_image_source.cc",
      "extensions/icon_with_badge_image_source.h",
      "extensions/settings_api_bubble_helpers.cc",
      "extensions/settings_api_bubble_helpers.h",
      "webui/extensions/chromeos/kiosk_apps_handler.cc",
      "webui/extensions/chromeos/kiosk_apps_handler.h",
      "webui/extensions/extension_basic_info.cc",
      "webui/extensions/extension_basic_info.h",
      "webui/extensions/extension_icon_source.cc",
      "webui/extensions/extension_icon_source.h",
    ]
  }
  if (enable_google_now && !is_android) {
    sources += [
      # These are non-Android because Android excludes all of options.
      "webui/options/geolocation_options_handler.cc",
      "webui/options/geolocation_options_handler.h",
    ]
  }
  if (enable_media_router && !is_android) {
    sources += [
      "toolbar/media_router_action.cc",
      "toolbar/media_router_action.h",
      "toolbar/media_router_action_controller.cc",
      "toolbar/media_router_action_controller.h",
      "toolbar/media_router_action_platform_delegate.h",
      "toolbar/media_router_contextual_menu.cc",
      "toolbar/media_router_contextual_menu.h",
      "views/toolbar/media_router_action_platform_delegate_views.cc",
      "views/toolbar/media_router_action_platform_delegate_views.h",
      "webui/media_router/cast_modes_with_media_sources.cc",
      "webui/media_router/cast_modes_with_media_sources.h",
      "webui/media_router/media_cast_mode.cc",
      "webui/media_router/media_cast_mode.h",
      "webui/media_router/media_router_dialog_controller_impl.cc",
      "webui/media_router/media_router_dialog_controller_impl.h",
      "webui/media_router/media_router_localized_strings_provider.cc",
      "webui/media_router/media_router_localized_strings_provider.h",
      "webui/media_router/media_router_resources_provider.cc",
      "webui/media_router/media_router_resources_provider.h",
      "webui/media_router/media_router_ui.cc",
      "webui/media_router/media_router_ui.h",
      "webui/media_router/media_router_webui_message_handler.cc",
      "webui/media_router/media_router_webui_message_handler.h",
      "webui/media_router/media_sink_with_cast_modes.cc",
      "webui/media_router/media_sink_with_cast_modes.h",
      "webui/media_router/query_result_manager.cc",
      "webui/media_router/query_result_manager.h",
    ]
    if (is_mac && !mac_views_browser) {
      sources -= [
        # This file is compiled on GYP but never referenced on Mac. Since it's
        # in a static library, it never gets pulled in and we never try to link
        # it (it doesn't link). In GN, source sets force us to get this rule
        # correct.
        "views/toolbar/media_router_action_platform_delegate_views.cc",
        "views/toolbar/media_router_action_platform_delegate_views.h",
      ]
    }
    deps += [
      "//chrome/browser/media/router",
      "//components/web_modal",
    ]
  }
  if (enable_webrtc) {
    sources += [
      "webui/media/webrtc_logs_ui.cc",
      "webui/media/webrtc_logs_ui.h",
    ]
  }
  if (enable_service_discovery) {
    sources += [
      "webui/local_discovery/local_discovery_ui.cc",
      "webui/local_discovery/local_discovery_ui.h",
      "webui/local_discovery/local_discovery_ui_handler.cc",
      "webui/local_discovery/local_discovery_ui_handler.h",
    ]
  }
}

# In GYP this is part of test_support_common.
static_library("test_support") {
  testonly = true

  sources = [
    "cocoa/cocoa_test_helper.h",
    "cocoa/cocoa_test_helper.mm",
    "cocoa/run_loop_testing.h",
    "cocoa/run_loop_testing.mm",
    "find_bar/find_bar_host_unittest_util.h",
    "login/login_handler_test_utils.cc",
    "login/login_handler_test_utils.h",
    "toolbar/test_toolbar_action_view_controller.cc",
    "toolbar/test_toolbar_action_view_controller.h",
  ]
  public_deps = [
    ":ui",
  ]
  deps = [
    "//chrome/app/theme:theme_resources",
    "//chrome/browser",
    "//chrome/browser/devtools",
    "//components/password_manager/core/browser",
    "//components/sessions",
    "//components/toolbar",
    "//components/translate/content/browser",
    "//components/zoom",
    "//content/public/browser",
    "//content/public/common",
    "//content/test:test_support",
    "//net:test_support",
    "//skia",
    "//testing/gtest",
    "//ui/base",
    "//ui/gfx:test_support",
    "//ui/shell_dialogs",
  ]

  if (toolkit_views && (!is_mac || mac_views_browser)) {
    sources += [
      "views/find_bar_host_unittest_util_views.cc",
      "views/toolbar/browser_action_test_util_views.cc",
    ]
    if (!is_mac) {
      deps += [ "//ui/aura" ]
    }
  } else {
    sources += [
      "cocoa/extensions/browser_action_test_util_mac.mm",
      "cocoa/find_bar/find_bar_host_unittest_util_cocoa.mm",
    ]
  }

  if (!is_android) {
    sources += [
      "exclusive_access/fullscreen_controller_state_test.cc",
      "exclusive_access/fullscreen_controller_state_test.h",
      "exclusive_access/fullscreen_controller_state_tests.h",
      "exclusive_access/fullscreen_controller_test.cc",
      "exclusive_access/fullscreen_controller_test.h",
      "passwords/manage_passwords_ui_controller_mock.cc",
      "passwords/manage_passwords_ui_controller_mock.h",
      "passwords/password_dialog_controller_mock.cc",
      "passwords/password_dialog_controller_mock.h",
      "passwords/passwords_model_delegate_mock.cc",
      "passwords/passwords_model_delegate_mock.h",
      "test/test_confirm_bubble_model.cc",
      "test/test_confirm_bubble_model.h",
    ]

    if (toolkit_views) {
      deps += [ "//chrome/test:test_support_ui" ]
    }
  }

  if (enable_extensions) {
    deps += [ "//extensions/browser" ]
  }
}
